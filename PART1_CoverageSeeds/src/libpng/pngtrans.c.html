<!doctype html><html><head><meta name='viewport' content='width=device-width,initial-scale=1'><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='../../../style.css'></head><body><h2>Coverage Report</h2><h4>Created: 2025-04-29 11:04</h4><div class='centered'><table><div class='source-name-title'><pre>/src/libpng/pngtrans.c</pre></div><tr><td><pre>Line</pre></td><td><pre>Count</pre></td><td><pre>Source (<a href='pngtrans.c.html#L21'>jump to first uncovered line</a>)</pre></td></tr><tr><td class='line-number'><a name='L1' href='pngtrans.c.html#L1'><pre>1</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* pngtrans.c - transforms the data in a row (used by both readers and writers)</pre></td></tr><tr><td class='line-number'><a name='L2' href='pngtrans.c.html#L2'><pre>2</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> *</pre></td></tr><tr><td class='line-number'><a name='L3' href='pngtrans.c.html#L3'><pre>3</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * Copyright (c) 2018-2024 Cosmin Truta</pre></td></tr><tr><td class='line-number'><a name='L4' href='pngtrans.c.html#L4'><pre>4</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * Copyright (c) 1998-2002,2004,2006-2018 Glenn Randers-Pehrson</pre></td></tr><tr><td class='line-number'><a name='L5' href='pngtrans.c.html#L5'><pre>5</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * Copyright (c) 1996-1997 Andreas Dilger</pre></td></tr><tr><td class='line-number'><a name='L6' href='pngtrans.c.html#L6'><pre>6</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * Copyright (c) 1995-1996 Guy Eric Schalnat, Group 42, Inc.</pre></td></tr><tr><td class='line-number'><a name='L7' href='pngtrans.c.html#L7'><pre>7</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> *</pre></td></tr><tr><td class='line-number'><a name='L8' href='pngtrans.c.html#L8'><pre>8</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * This code is released under the libpng license.</pre></td></tr><tr><td class='line-number'><a name='L9' href='pngtrans.c.html#L9'><pre>9</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * For conditions of distribution and use, see the disclaimer</pre></td></tr><tr><td class='line-number'><a name='L10' href='pngtrans.c.html#L10'><pre>10</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * and license in png.h</pre></td></tr><tr><td class='line-number'><a name='L11' href='pngtrans.c.html#L11'><pre>11</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> */</pre></td></tr><tr><td class='line-number'><a name='L12' href='pngtrans.c.html#L12'><pre>12</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L13' href='pngtrans.c.html#L13'><pre>13</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#include &quot;pngpriv.h&quot;</pre></td></tr><tr><td class='line-number'><a name='L14' href='pngtrans.c.html#L14'><pre>14</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L15' href='pngtrans.c.html#L15'><pre>15</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_SUPPORTED) || defined(PNG_WRITE_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L16' href='pngtrans.c.html#L16'><pre>16</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L17' href='pngtrans.c.html#L17'><pre>17</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_BGR_SUPPORTED) || defined(PNG_WRITE_BGR_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L18' href='pngtrans.c.html#L18'><pre>18</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Turn on BGR-to-RGB mapping */</pre></td></tr><tr><td class='line-number'><a name='L19' href='pngtrans.c.html#L19'><pre>19</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L20' href='pngtrans.c.html#L20'><pre>20</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_bgr(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L21' href='pngtrans.c.html#L21'><pre>21</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L22' href='pngtrans.c.html#L22'><pre>22</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_bgr&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L23' href='pngtrans.c.html#L23'><pre>23</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L24' href='pngtrans.c.html#L24'><pre>24</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L25' href='pngtrans.c.html#L25'><pre>25</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L26' href='pngtrans.c.html#L26'><pre>26</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L27' href='pngtrans.c.html#L27'><pre>27</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>png_ptr-&gt;transformations |= </span><span class='red'>PNG_BGR</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L28' href='pngtrans.c.html#L28'><pre>28</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L29' href='pngtrans.c.html#L29'><pre>29</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L30' href='pngtrans.c.html#L30'><pre>30</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L31' href='pngtrans.c.html#L31'><pre>31</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_SWAP_SUPPORTED) || defined(PNG_WRITE_SWAP_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L32' href='pngtrans.c.html#L32'><pre>32</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Turn on 16-bit byte swapping */</pre></td></tr><tr><td class='line-number'><a name='L33' href='pngtrans.c.html#L33'><pre>33</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L34' href='pngtrans.c.html#L34'><pre>34</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_swap(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L35' href='pngtrans.c.html#L35'><pre>35</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L36' href='pngtrans.c.html#L36'><pre>36</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_swap&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L37' href='pngtrans.c.html#L37'><pre>37</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L38' href='pngtrans.c.html#L38'><pre>38</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L39' href='pngtrans.c.html#L39'><pre>39</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L40' href='pngtrans.c.html#L40'><pre>40</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L41' href='pngtrans.c.html#L41'><pre>41</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>if (</span><span class='red'>png_ptr-&gt;bit_depth == 16</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L42' href='pngtrans.c.html#L42'><pre>42</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>png_ptr-&gt;transformations |= </span><span class='red'>PNG_SWAP_BYTES</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L43' href='pngtrans.c.html#L43'><pre>43</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L44' href='pngtrans.c.html#L44'><pre>44</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L45' href='pngtrans.c.html#L45'><pre>45</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L46' href='pngtrans.c.html#L46'><pre>46</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_PACK_SUPPORTED) || defined(PNG_WRITE_PACK_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L47' href='pngtrans.c.html#L47'><pre>47</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Turn on pixel packing */</pre></td></tr><tr><td class='line-number'><a name='L48' href='pngtrans.c.html#L48'><pre>48</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L49' href='pngtrans.c.html#L49'><pre>49</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_packing(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L50' href='pngtrans.c.html#L50'><pre>50</pre></a></td><td class='covered-line'><pre>1.00k</pre></td><td class='code'><pre>{</pre></td></tr><tr><td class='line-number'><a name='L51' href='pngtrans.c.html#L51'><pre>51</pre></a></td><td class='covered-line'><pre>1.00k</pre></td><td class='code'><pre>   png_debug(1, &quot;in png_set_packing&quot;);</pre></td></tr><tr><td class='line-number'><a name='L52' href='pngtrans.c.html#L52'><pre>52</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L53' href='pngtrans.c.html#L53'><pre>53</pre></a></td><td class='covered-line'><pre>1.00k</pre></td><td class='code'><pre>   if (png_ptr == NULL)</pre></td></tr><tr><td class='line-number'><a name='L54' href='pngtrans.c.html#L54'><pre>54</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>return</span>;</pre></td></tr><tr><td class='line-number'><a name='L55' href='pngtrans.c.html#L55'><pre>55</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L56' href='pngtrans.c.html#L56'><pre>56</pre></a></td><td class='covered-line'><pre>1.00k</pre></td><td class='code'><pre>   if (png_ptr-&gt;bit_depth &lt; 8)</pre></td></tr><tr><td class='line-number'><a name='L57' href='pngtrans.c.html#L57'><pre>57</pre></a></td><td class='covered-line'><pre>498</pre></td><td class='code'><pre>   {</pre></td></tr><tr><td class='line-number'><a name='L58' href='pngtrans.c.html#L58'><pre>58</pre></a></td><td class='covered-line'><pre>498</pre></td><td class='code'><pre>      png_ptr-&gt;transformations |= PNG_PACK;</pre></td></tr><tr><td class='line-number'><a name='L59' href='pngtrans.c.html#L59'><pre>59</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#     ifdef PNG_WRITE_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L60' href='pngtrans.c.html#L60'><pre>60</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         png_ptr-&gt;usr_bit_depth = 8;</pre></td></tr><tr><td class='line-number'><a name='L61' href='pngtrans.c.html#L61'><pre>61</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#     endif</pre></td></tr><tr><td class='line-number'><a name='L62' href='pngtrans.c.html#L62'><pre>62</pre></a></td><td class='covered-line'><pre>498</pre></td><td class='code'><pre>   }</pre></td></tr><tr><td class='line-number'><a name='L63' href='pngtrans.c.html#L63'><pre>63</pre></a></td><td class='covered-line'><pre>1.00k</pre></td><td class='code'><pre>}</pre></td></tr><tr><td class='line-number'><a name='L64' href='pngtrans.c.html#L64'><pre>64</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L65' href='pngtrans.c.html#L65'><pre>65</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L66' href='pngtrans.c.html#L66'><pre>66</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_PACKSWAP_SUPPORTED)||defined(PNG_WRITE_PACKSWAP_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L67' href='pngtrans.c.html#L67'><pre>67</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Turn on packed pixel swapping */</pre></td></tr><tr><td class='line-number'><a name='L68' href='pngtrans.c.html#L68'><pre>68</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L69' href='pngtrans.c.html#L69'><pre>69</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_packswap(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L70' href='pngtrans.c.html#L70'><pre>70</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L71' href='pngtrans.c.html#L71'><pre>71</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_packswap&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L72' href='pngtrans.c.html#L72'><pre>72</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L73' href='pngtrans.c.html#L73'><pre>73</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L74' href='pngtrans.c.html#L74'><pre>74</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L75' href='pngtrans.c.html#L75'><pre>75</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L76' href='pngtrans.c.html#L76'><pre>76</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>if (</span><span class='red'>png_ptr-&gt;bit_depth &lt; 8</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L77' href='pngtrans.c.html#L77'><pre>77</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>png_ptr-&gt;transformations |= </span><span class='red'>PNG_PACKSWAP</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L78' href='pngtrans.c.html#L78'><pre>78</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L79' href='pngtrans.c.html#L79'><pre>79</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L80' href='pngtrans.c.html#L80'><pre>80</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L81' href='pngtrans.c.html#L81'><pre>81</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_SHIFT_SUPPORTED) || defined(PNG_WRITE_SHIFT_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L82' href='pngtrans.c.html#L82'><pre>82</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L83' href='pngtrans.c.html#L83'><pre>83</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_shift(png_structrp png_ptr, png_const_color_8p true_bits)</pre></td></tr><tr><td class='line-number'><a name='L84' href='pngtrans.c.html#L84'><pre>84</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L85' href='pngtrans.c.html#L85'><pre>85</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_shift&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L86' href='pngtrans.c.html#L86'><pre>86</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L87' href='pngtrans.c.html#L87'><pre>87</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L88' href='pngtrans.c.html#L88'><pre>88</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L89' href='pngtrans.c.html#L89'><pre>89</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L90' href='pngtrans.c.html#L90'><pre>90</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>png_ptr-&gt;transformations |= </span><span class='red'>PNG_SHIFT</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L91' href='pngtrans.c.html#L91'><pre>91</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   png_ptr-&gt;shift = *true_bits;</span></pre></td></tr><tr><td class='line-number'><a name='L92' href='pngtrans.c.html#L92'><pre>92</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L93' href='pngtrans.c.html#L93'><pre>93</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L94' href='pngtrans.c.html#L94'><pre>94</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L95' href='pngtrans.c.html#L95'><pre>95</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_INTERLACING_SUPPORTED) || \</pre></td></tr><tr><td class='line-number'><a name='L96' href='pngtrans.c.html#L96'><pre>96</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    defined(PNG_WRITE_INTERLACING_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L97' href='pngtrans.c.html#L97'><pre>97</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>int PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L98' href='pngtrans.c.html#L98'><pre>98</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_interlace_handling(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L99' href='pngtrans.c.html#L99'><pre>99</pre></a></td><td class='covered-line'><pre>1.48k</pre></td><td class='code'><pre>{</pre></td></tr><tr><td class='line-number'><a name='L100' href='pngtrans.c.html#L100'><pre>100</pre></a></td><td class='covered-line'><pre>1.48k</pre></td><td class='code'><pre>   png_debug(1, &quot;in png_set_interlace handling&quot;);</pre></td></tr><tr><td class='line-number'><a name='L101' href='pngtrans.c.html#L101'><pre>101</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L102' href='pngtrans.c.html#L102'><pre>102</pre></a></td><td class='covered-line'><pre>1.48k</pre></td><td class='code'><pre>   if (png_ptr != 0 &amp;&amp; png_ptr-&gt;interlaced != 0)</pre></td></tr><tr><td class='line-number'><a name='L103' href='pngtrans.c.html#L103'><pre>103</pre></a></td><td class='covered-line'><pre>413</pre></td><td class='code'><pre>   {</pre></td></tr><tr><td class='line-number'><a name='L104' href='pngtrans.c.html#L104'><pre>104</pre></a></td><td class='covered-line'><pre>413</pre></td><td class='code'><pre>      png_ptr-&gt;transformations |= PNG_INTERLACE;</pre></td></tr><tr><td class='line-number'><a name='L105' href='pngtrans.c.html#L105'><pre>105</pre></a></td><td class='covered-line'><pre>413</pre></td><td class='code'><pre>      return 7;</pre></td></tr><tr><td class='line-number'><a name='L106' href='pngtrans.c.html#L106'><pre>106</pre></a></td><td class='covered-line'><pre>413</pre></td><td class='code'><pre>   }</pre></td></tr><tr><td class='line-number'><a name='L107' href='pngtrans.c.html#L107'><pre>107</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L108' href='pngtrans.c.html#L108'><pre>108</pre></a></td><td class='covered-line'><pre>1.07k</pre></td><td class='code'><pre>   return 1;</pre></td></tr><tr><td class='line-number'><a name='L109' href='pngtrans.c.html#L109'><pre>109</pre></a></td><td class='covered-line'><pre>1.48k</pre></td><td class='code'><pre>}</pre></td></tr><tr><td class='line-number'><a name='L110' href='pngtrans.c.html#L110'><pre>110</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L111' href='pngtrans.c.html#L111'><pre>111</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L112' href='pngtrans.c.html#L112'><pre>112</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_FILLER_SUPPORTED) || defined(PNG_WRITE_FILLER_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L113' href='pngtrans.c.html#L113'><pre>113</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Add a filler byte on read, or remove a filler or alpha byte on write.</pre></td></tr><tr><td class='line-number'><a name='L114' href='pngtrans.c.html#L114'><pre>114</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * The filler type has changed in v0.95 to allow future 2-byte fillers</pre></td></tr><tr><td class='line-number'><a name='L115' href='pngtrans.c.html#L115'><pre>115</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * for 48-bit input data, as well as to avoid problems with some compilers</pre></td></tr><tr><td class='line-number'><a name='L116' href='pngtrans.c.html#L116'><pre>116</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * that don&apos;t like bytes as parameters.</pre></td></tr><tr><td class='line-number'><a name='L117' href='pngtrans.c.html#L117'><pre>117</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> */</pre></td></tr><tr><td class='line-number'><a name='L118' href='pngtrans.c.html#L118'><pre>118</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L119' href='pngtrans.c.html#L119'><pre>119</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_filler(png_structrp png_ptr, png_uint_32 filler, int filler_loc)</pre></td></tr><tr><td class='line-number'><a name='L120' href='pngtrans.c.html#L120'><pre>120</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>{</pre></td></tr><tr><td class='line-number'><a name='L121' href='pngtrans.c.html#L121'><pre>121</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   png_debug(1, &quot;in png_set_filler&quot;);</pre></td></tr><tr><td class='line-number'><a name='L122' href='pngtrans.c.html#L122'><pre>122</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L123' href='pngtrans.c.html#L123'><pre>123</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   if (png_ptr == NULL)</pre></td></tr><tr><td class='line-number'><a name='L124' href='pngtrans.c.html#L124'><pre>124</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>return</span>;</pre></td></tr><tr><td class='line-number'><a name='L125' href='pngtrans.c.html#L125'><pre>125</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L126' href='pngtrans.c.html#L126'><pre>126</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* In libpng 1.6 it is possible to determine whether this is a read or write</pre></td></tr><tr><td class='line-number'><a name='L127' href='pngtrans.c.html#L127'><pre>127</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    * operation and therefore to do more checking here for a valid call.</pre></td></tr><tr><td class='line-number'><a name='L128' href='pngtrans.c.html#L128'><pre>128</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    */</pre></td></tr><tr><td class='line-number'><a name='L129' href='pngtrans.c.html#L129'><pre>129</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   if ((png_ptr-&gt;mode &amp; PNG_IS_READ_STRUCT) != 0)</pre></td></tr><tr><td class='line-number'><a name='L130' href='pngtrans.c.html#L130'><pre>130</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   {</pre></td></tr><tr><td class='line-number'><a name='L131' href='pngtrans.c.html#L131'><pre>131</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>#     ifdef PNG_READ_FILLER_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L132' href='pngtrans.c.html#L132'><pre>132</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         /* On read png_set_filler is always valid, regardless of the base PNG</pre></td></tr><tr><td class='line-number'><a name='L133' href='pngtrans.c.html#L133'><pre>133</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          * format, because other transformations can give a format where the</pre></td></tr><tr><td class='line-number'><a name='L134' href='pngtrans.c.html#L134'><pre>134</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          * filler code can execute (basically an 8 or 16-bit component RGB or G</pre></td></tr><tr><td class='line-number'><a name='L135' href='pngtrans.c.html#L135'><pre>135</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          * format.)</pre></td></tr><tr><td class='line-number'><a name='L136' href='pngtrans.c.html#L136'><pre>136</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          *</pre></td></tr><tr><td class='line-number'><a name='L137' href='pngtrans.c.html#L137'><pre>137</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          * NOTE: usr_channels is not used by the read code!  (This has led to</pre></td></tr><tr><td class='line-number'><a name='L138' href='pngtrans.c.html#L138'><pre>138</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          * confusion in the past.)  The filler is only used in the read code.</pre></td></tr><tr><td class='line-number'><a name='L139' href='pngtrans.c.html#L139'><pre>139</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          */</pre></td></tr><tr><td class='line-number'><a name='L140' href='pngtrans.c.html#L140'><pre>140</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>         png_ptr-&gt;filler = (png_uint_16)filler;</pre></td></tr><tr><td class='line-number'><a name='L141' href='pngtrans.c.html#L141'><pre>141</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#     else</pre></td></tr><tr><td class='line-number'><a name='L142' href='pngtrans.c.html#L142'><pre>142</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         png_app_error(png_ptr, &quot;png_set_filler not supported on read&quot;);</pre></td></tr><tr><td class='line-number'><a name='L143' href='pngtrans.c.html#L143'><pre>143</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         PNG_UNUSED(filler) /* not used in the write case */</pre></td></tr><tr><td class='line-number'><a name='L144' href='pngtrans.c.html#L144'><pre>144</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         return;</pre></td></tr><tr><td class='line-number'><a name='L145' href='pngtrans.c.html#L145'><pre>145</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#     endif</pre></td></tr><tr><td class='line-number'><a name='L146' href='pngtrans.c.html#L146'><pre>146</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   }</pre></td></tr><tr><td class='line-number'><a name='L147' href='pngtrans.c.html#L147'><pre>147</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L148' href='pngtrans.c.html#L148'><pre>148</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   else /* write */</pre></td></tr><tr><td class='line-number'><a name='L149' href='pngtrans.c.html#L149'><pre>149</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L150' href='pngtrans.c.html#L150'><pre>150</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#     ifdef PNG_WRITE_FILLER_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L151' href='pngtrans.c.html#L151'><pre>151</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         /* On write the usr_channels parameter must be set correctly at the</pre></td></tr><tr><td class='line-number'><a name='L152' href='pngtrans.c.html#L152'><pre>152</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          * start to record the number of channels in the app-supplied data.</pre></td></tr><tr><td class='line-number'><a name='L153' href='pngtrans.c.html#L153'><pre>153</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          */</pre></td></tr><tr><td class='line-number'><a name='L154' href='pngtrans.c.html#L154'><pre>154</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         switch (png_ptr-&gt;color_type)</pre></td></tr><tr><td class='line-number'><a name='L155' href='pngtrans.c.html#L155'><pre>155</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         {</pre></td></tr><tr><td class='line-number'><a name='L156' href='pngtrans.c.html#L156'><pre>156</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>            case PNG_COLOR_TYPE_RGB:</pre></td></tr><tr><td class='line-number'><a name='L157' href='pngtrans.c.html#L157'><pre>157</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               png_ptr-&gt;usr_channels = 4;</pre></td></tr><tr><td class='line-number'><a name='L158' href='pngtrans.c.html#L158'><pre>158</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               break;</pre></td></tr><tr><td class='line-number'><a name='L159' href='pngtrans.c.html#L159'><pre>159</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L160' href='pngtrans.c.html#L160'><pre>160</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>            case PNG_COLOR_TYPE_GRAY:</pre></td></tr><tr><td class='line-number'><a name='L161' href='pngtrans.c.html#L161'><pre>161</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               if (png_ptr-&gt;bit_depth &gt;= 8)</pre></td></tr><tr><td class='line-number'><a name='L162' href='pngtrans.c.html#L162'><pre>162</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               {</pre></td></tr><tr><td class='line-number'><a name='L163' href='pngtrans.c.html#L163'><pre>163</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                  png_ptr-&gt;usr_channels = 2;</pre></td></tr><tr><td class='line-number'><a name='L164' href='pngtrans.c.html#L164'><pre>164</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                  break;</pre></td></tr><tr><td class='line-number'><a name='L165' href='pngtrans.c.html#L165'><pre>165</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               }</pre></td></tr><tr><td class='line-number'><a name='L166' href='pngtrans.c.html#L166'><pre>166</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L167' href='pngtrans.c.html#L167'><pre>167</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               else</pre></td></tr><tr><td class='line-number'><a name='L168' href='pngtrans.c.html#L168'><pre>168</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               {</pre></td></tr><tr><td class='line-number'><a name='L169' href='pngtrans.c.html#L169'><pre>169</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                  /* There simply isn&apos;t any code in libpng to strip out bits</pre></td></tr><tr><td class='line-number'><a name='L170' href='pngtrans.c.html#L170'><pre>170</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                   * from bytes when the components are less than a byte in</pre></td></tr><tr><td class='line-number'><a name='L171' href='pngtrans.c.html#L171'><pre>171</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                   * size!</pre></td></tr><tr><td class='line-number'><a name='L172' href='pngtrans.c.html#L172'><pre>172</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                   */</pre></td></tr><tr><td class='line-number'><a name='L173' href='pngtrans.c.html#L173'><pre>173</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                  png_app_error(png_ptr,</pre></td></tr><tr><td class='line-number'><a name='L174' href='pngtrans.c.html#L174'><pre>174</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                      &quot;png_set_filler is invalid for&quot;</pre></td></tr><tr><td class='line-number'><a name='L175' href='pngtrans.c.html#L175'><pre>175</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                      &quot; low bit depth gray output&quot;);</pre></td></tr><tr><td class='line-number'><a name='L176' href='pngtrans.c.html#L176'><pre>176</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                  return;</pre></td></tr><tr><td class='line-number'><a name='L177' href='pngtrans.c.html#L177'><pre>177</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               }</pre></td></tr><tr><td class='line-number'><a name='L178' href='pngtrans.c.html#L178'><pre>178</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L179' href='pngtrans.c.html#L179'><pre>179</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>            default:</pre></td></tr><tr><td class='line-number'><a name='L180' href='pngtrans.c.html#L180'><pre>180</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               png_app_error(png_ptr,</pre></td></tr><tr><td class='line-number'><a name='L181' href='pngtrans.c.html#L181'><pre>181</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>                   &quot;png_set_filler: inappropriate color type&quot;);</pre></td></tr><tr><td class='line-number'><a name='L182' href='pngtrans.c.html#L182'><pre>182</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>               return;</pre></td></tr><tr><td class='line-number'><a name='L183' href='pngtrans.c.html#L183'><pre>183</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         }</pre></td></tr><tr><td class='line-number'><a name='L184' href='pngtrans.c.html#L184'><pre>184</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#     else<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L185' href='pngtrans.c.html#L185'><pre>185</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>png_app_error</span><span class='red'>(png_ptr, &quot;png_set_filler not supported on write&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L186' href='pngtrans.c.html#L186'><pre>186</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         return;</span></pre></td></tr><tr><td class='line-number'><a name='L187' href='pngtrans.c.html#L187'><pre>187</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>#     endif</span></pre></td></tr><tr><td class='line-number'><a name='L188' href='pngtrans.c.html#L188'><pre>188</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L189' href='pngtrans.c.html#L189'><pre>189</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L190' href='pngtrans.c.html#L190'><pre>190</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* Here on success - libpng supports the operation, set the transformation</pre></td></tr><tr><td class='line-number'><a name='L191' href='pngtrans.c.html#L191'><pre>191</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    * and the flag to say where the filler channel is.</pre></td></tr><tr><td class='line-number'><a name='L192' href='pngtrans.c.html#L192'><pre>192</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    */</pre></td></tr><tr><td class='line-number'><a name='L193' href='pngtrans.c.html#L193'><pre>193</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   png_ptr-&gt;transformations |= PNG_FILLER;</pre></td></tr><tr><td class='line-number'><a name='L194' href='pngtrans.c.html#L194'><pre>194</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L195' href='pngtrans.c.html#L195'><pre>195</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   if (filler_loc == PNG_FILLER_AFTER)</pre></td></tr><tr><td class='line-number'><a name='L196' href='pngtrans.c.html#L196'><pre>196</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>      png_ptr-&gt;flags |= PNG_FLAG_FILLER_AFTER;</pre></td></tr><tr><td class='line-number'><a name='L197' href='pngtrans.c.html#L197'><pre>197</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L198' href='pngtrans.c.html#L198'><pre>198</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   else</pre></td></tr><tr><td class='line-number'><a name='L199' href='pngtrans.c.html#L199'><pre>199</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>png_ptr-&gt;flags &amp;= ~</span><span class='red'>PNG_FLAG_FILLER_AFTER</span>;</pre></td></tr><tr><td class='line-number'><a name='L200' href='pngtrans.c.html#L200'><pre>200</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>}</pre></td></tr><tr><td class='line-number'><a name='L201' href='pngtrans.c.html#L201'><pre>201</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L202' href='pngtrans.c.html#L202'><pre>202</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Added to libpng-1.2.7 */</pre></td></tr><tr><td class='line-number'><a name='L203' href='pngtrans.c.html#L203'><pre>203</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L204' href='pngtrans.c.html#L204'><pre>204</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_add_alpha(png_structrp png_ptr, png_uint_32 filler, int filler_loc)</pre></td></tr><tr><td class='line-number'><a name='L205' href='pngtrans.c.html#L205'><pre>205</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>{</pre></td></tr><tr><td class='line-number'><a name='L206' href='pngtrans.c.html#L206'><pre>206</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   png_debug(1, &quot;in png_set_add_alpha&quot;);</pre></td></tr><tr><td class='line-number'><a name='L207' href='pngtrans.c.html#L207'><pre>207</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L208' href='pngtrans.c.html#L208'><pre>208</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   if (png_ptr == NULL)</pre></td></tr><tr><td class='line-number'><a name='L209' href='pngtrans.c.html#L209'><pre>209</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>return</span>;</pre></td></tr><tr><td class='line-number'><a name='L210' href='pngtrans.c.html#L210'><pre>210</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L211' href='pngtrans.c.html#L211'><pre>211</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   png_set_filler(png_ptr, filler, filler_loc);</pre></td></tr><tr><td class='line-number'><a name='L212' href='pngtrans.c.html#L212'><pre>212</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* The above may fail to do anything. */</pre></td></tr><tr><td class='line-number'><a name='L213' href='pngtrans.c.html#L213'><pre>213</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>   if ((png_ptr-&gt;transformations &amp; PNG_FILLER) != 0)</pre></td></tr><tr><td class='line-number'><a name='L214' href='pngtrans.c.html#L214'><pre>214</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>      png_ptr-&gt;transformations |= PNG_ADD_ALPHA;</pre></td></tr><tr><td class='line-number'><a name='L215' href='pngtrans.c.html#L215'><pre>215</pre></a></td><td class='covered-line'><pre>258</pre></td><td class='code'><pre>}</pre></td></tr><tr><td class='line-number'><a name='L216' href='pngtrans.c.html#L216'><pre>216</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L217' href='pngtrans.c.html#L217'><pre>217</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L218' href='pngtrans.c.html#L218'><pre>218</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L219' href='pngtrans.c.html#L219'><pre>219</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_SWAP_ALPHA_SUPPORTED) || \</pre></td></tr><tr><td class='line-number'><a name='L220' href='pngtrans.c.html#L220'><pre>220</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    defined(PNG_WRITE_SWAP_ALPHA_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L221' href='pngtrans.c.html#L221'><pre>221</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L222' href='pngtrans.c.html#L222'><pre>222</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_swap_alpha(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L223' href='pngtrans.c.html#L223'><pre>223</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L224' href='pngtrans.c.html#L224'><pre>224</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_swap_alpha&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L225' href='pngtrans.c.html#L225'><pre>225</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L226' href='pngtrans.c.html#L226'><pre>226</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L227' href='pngtrans.c.html#L227'><pre>227</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L228' href='pngtrans.c.html#L228'><pre>228</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L229' href='pngtrans.c.html#L229'><pre>229</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>png_ptr-&gt;transformations |= </span><span class='red'>PNG_SWAP_ALPHA</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L230' href='pngtrans.c.html#L230'><pre>230</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L231' href='pngtrans.c.html#L231'><pre>231</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L232' href='pngtrans.c.html#L232'><pre>232</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L233' href='pngtrans.c.html#L233'><pre>233</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_INVERT_ALPHA_SUPPORTED) || \</pre></td></tr><tr><td class='line-number'><a name='L234' href='pngtrans.c.html#L234'><pre>234</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    defined(PNG_WRITE_INVERT_ALPHA_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L235' href='pngtrans.c.html#L235'><pre>235</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L236' href='pngtrans.c.html#L236'><pre>236</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_invert_alpha(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L237' href='pngtrans.c.html#L237'><pre>237</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L238' href='pngtrans.c.html#L238'><pre>238</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_invert_alpha&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L239' href='pngtrans.c.html#L239'><pre>239</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L240' href='pngtrans.c.html#L240'><pre>240</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L241' href='pngtrans.c.html#L241'><pre>241</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L242' href='pngtrans.c.html#L242'><pre>242</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L243' href='pngtrans.c.html#L243'><pre>243</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>png_ptr-&gt;transformations |= </span><span class='red'>PNG_INVERT_ALPHA</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L244' href='pngtrans.c.html#L244'><pre>244</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L245' href='pngtrans.c.html#L245'><pre>245</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L246' href='pngtrans.c.html#L246'><pre>246</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L247' href='pngtrans.c.html#L247'><pre>247</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_INVERT_SUPPORTED) || defined(PNG_WRITE_INVERT_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L248' href='pngtrans.c.html#L248'><pre>248</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L249' href='pngtrans.c.html#L249'><pre>249</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_invert_mono(png_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L250' href='pngtrans.c.html#L250'><pre>250</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L251' href='pngtrans.c.html#L251'><pre>251</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_invert_mono&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L252' href='pngtrans.c.html#L252'><pre>252</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L253' href='pngtrans.c.html#L253'><pre>253</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L254' href='pngtrans.c.html#L254'><pre>254</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L255' href='pngtrans.c.html#L255'><pre>255</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L256' href='pngtrans.c.html#L256'><pre>256</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>png_ptr-&gt;transformations |= </span><span class='red'>PNG_INVERT_MONO</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L257' href='pngtrans.c.html#L257'><pre>257</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L258' href='pngtrans.c.html#L258'><pre>258</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L259' href='pngtrans.c.html#L259'><pre>259</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Invert monochrome grayscale data */</pre></td></tr><tr><td class='line-number'><a name='L260' href='pngtrans.c.html#L260'><pre>260</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void /* PRIVATE */</pre></td></tr><tr><td class='line-number'><a name='L261' href='pngtrans.c.html#L261'><pre>261</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_do_invert(png_row_infop row_info, png_bytep row)</pre></td></tr><tr><td class='line-number'><a name='L262' href='pngtrans.c.html#L262'><pre>262</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L263' href='pngtrans.c.html#L263'><pre>263</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_do_invert&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L264' href='pngtrans.c.html#L264'><pre>264</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L265' href='pngtrans.c.html#L265'><pre>265</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>  /* This test removed from libpng version 1.0.13 and 1.2.0:</pre></td></tr><tr><td class='line-number'><a name='L266' href='pngtrans.c.html#L266'><pre>266</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   *   if (row_info-&gt;bit_depth == 1 &amp;&amp;</pre></td></tr><tr><td class='line-number'><a name='L267' href='pngtrans.c.html#L267'><pre>267</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L268' href='pngtrans.c.html#L268'><pre>268</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_GRAY</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L269' href='pngtrans.c.html#L269'><pre>269</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L270' href='pngtrans.c.html#L270'><pre>270</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_bytep rp = row;</span></pre></td></tr><tr><td class='line-number'><a name='L271' href='pngtrans.c.html#L271'><pre>271</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      size_t i;</span></pre></td></tr><tr><td class='line-number'><a name='L272' href='pngtrans.c.html#L272'><pre>272</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      size_t istop = row_info-&gt;rowbytes;</span></pre></td></tr><tr><td class='line-number'><a name='L273' href='pngtrans.c.html#L273'><pre>273</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L274' href='pngtrans.c.html#L274'><pre>274</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      for (i = 0; </span><span class='red'>i &lt; istop</span><span class='red'>; </span><span class='red'>i++</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L275' href='pngtrans.c.html#L275'><pre>275</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L276' href='pngtrans.c.html#L276'><pre>276</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         *rp = (png_byte)(~(*rp));</span></pre></td></tr><tr><td class='line-number'><a name='L277' href='pngtrans.c.html#L277'><pre>277</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         rp++;</span></pre></td></tr><tr><td class='line-number'><a name='L278' href='pngtrans.c.html#L278'><pre>278</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L279' href='pngtrans.c.html#L279'><pre>279</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L280' href='pngtrans.c.html#L280'><pre>280</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L281' href='pngtrans.c.html#L281'><pre>281</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   else <span class='red'>if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_GRAY_ALPHA</span><span class='red'> &amp;&amp;</span></pre></td></tr><tr><td class='line-number'><a name='L282' href='pngtrans.c.html#L282'><pre>282</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>row_info-&gt;bit_depth == 8</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L283' href='pngtrans.c.html#L283'><pre>283</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L284' href='pngtrans.c.html#L284'><pre>284</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_bytep rp = row;</span></pre></td></tr><tr><td class='line-number'><a name='L285' href='pngtrans.c.html#L285'><pre>285</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      size_t i;</span></pre></td></tr><tr><td class='line-number'><a name='L286' href='pngtrans.c.html#L286'><pre>286</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      size_t istop = row_info-&gt;rowbytes;</span></pre></td></tr><tr><td class='line-number'><a name='L287' href='pngtrans.c.html#L287'><pre>287</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L288' href='pngtrans.c.html#L288'><pre>288</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      for (i = 0; </span><span class='red'>i &lt; istop</span><span class='red'>; </span><span class='red'>i += 2</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L289' href='pngtrans.c.html#L289'><pre>289</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L290' href='pngtrans.c.html#L290'><pre>290</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         *rp = (png_byte)(~(*rp));</span></pre></td></tr><tr><td class='line-number'><a name='L291' href='pngtrans.c.html#L291'><pre>291</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         rp += 2;</span></pre></td></tr><tr><td class='line-number'><a name='L292' href='pngtrans.c.html#L292'><pre>292</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L293' href='pngtrans.c.html#L293'><pre>293</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L294' href='pngtrans.c.html#L294'><pre>294</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L295' href='pngtrans.c.html#L295'><pre>295</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>#ifdef PNG_16BIT_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L296' href='pngtrans.c.html#L296'><pre>296</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   else <span class='red'>if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_GRAY_ALPHA</span><span class='red'> &amp;&amp;</span></pre></td></tr><tr><td class='line-number'><a name='L297' href='pngtrans.c.html#L297'><pre>297</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>row_info-&gt;bit_depth == 16</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L298' href='pngtrans.c.html#L298'><pre>298</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L299' href='pngtrans.c.html#L299'><pre>299</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_bytep rp = row;</span></pre></td></tr><tr><td class='line-number'><a name='L300' href='pngtrans.c.html#L300'><pre>300</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      size_t i;</span></pre></td></tr><tr><td class='line-number'><a name='L301' href='pngtrans.c.html#L301'><pre>301</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      size_t istop = row_info-&gt;rowbytes;</span></pre></td></tr><tr><td class='line-number'><a name='L302' href='pngtrans.c.html#L302'><pre>302</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L303' href='pngtrans.c.html#L303'><pre>303</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      for (i = 0; </span><span class='red'>i &lt; istop</span><span class='red'>; </span><span class='red'>i += 4</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L304' href='pngtrans.c.html#L304'><pre>304</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L305' href='pngtrans.c.html#L305'><pre>305</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         *rp = (png_byte)(~(*rp));</span></pre></td></tr><tr><td class='line-number'><a name='L306' href='pngtrans.c.html#L306'><pre>306</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         *(rp + 1) = (png_byte)(~(*(rp + 1)));</span></pre></td></tr><tr><td class='line-number'><a name='L307' href='pngtrans.c.html#L307'><pre>307</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         rp += 4;</span></pre></td></tr><tr><td class='line-number'><a name='L308' href='pngtrans.c.html#L308'><pre>308</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L309' href='pngtrans.c.html#L309'><pre>309</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L310' href='pngtrans.c.html#L310'><pre>310</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>#endif</span></pre></td></tr><tr><td class='line-number'><a name='L311' href='pngtrans.c.html#L311'><pre>311</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L312' href='pngtrans.c.html#L312'><pre>312</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L313' href='pngtrans.c.html#L313'><pre>313</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L314' href='pngtrans.c.html#L314'><pre>314</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#ifdef PNG_16BIT_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L315' href='pngtrans.c.html#L315'><pre>315</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_SWAP_SUPPORTED) || defined(PNG_WRITE_SWAP_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L316' href='pngtrans.c.html#L316'><pre>316</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Swaps byte order on 16-bit depth images */</pre></td></tr><tr><td class='line-number'><a name='L317' href='pngtrans.c.html#L317'><pre>317</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void /* PRIVATE */</pre></td></tr><tr><td class='line-number'><a name='L318' href='pngtrans.c.html#L318'><pre>318</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_do_swap(png_row_infop row_info, png_bytep row)</pre></td></tr><tr><td class='line-number'><a name='L319' href='pngtrans.c.html#L319'><pre>319</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L320' href='pngtrans.c.html#L320'><pre>320</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_do_swap&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L321' href='pngtrans.c.html#L321'><pre>321</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L322' href='pngtrans.c.html#L322'><pre>322</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>row_info-&gt;bit_depth == 16</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L323' href='pngtrans.c.html#L323'><pre>323</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L324' href='pngtrans.c.html#L324'><pre>324</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_bytep rp = row;</span></pre></td></tr><tr><td class='line-number'><a name='L325' href='pngtrans.c.html#L325'><pre>325</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_uint_32 i;</span></pre></td></tr><tr><td class='line-number'><a name='L326' href='pngtrans.c.html#L326'><pre>326</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_uint_32 istop= row_info-&gt;width * row_info-&gt;channels;</span></pre></td></tr><tr><td class='line-number'><a name='L327' href='pngtrans.c.html#L327'><pre>327</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L328' href='pngtrans.c.html#L328'><pre>328</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      for (i = 0; </span><span class='red'>i &lt; istop</span><span class='red'>; </span><span class='red'>i++, rp += 2</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L329' href='pngtrans.c.html#L329'><pre>329</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L330' href='pngtrans.c.html#L330'><pre>330</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#ifdef PNG_BUILTIN_BSWAP16_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L331' href='pngtrans.c.html#L331'><pre>331</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         /* Feature added to libpng-1.6.11 for testing purposes, not</pre></td></tr><tr><td class='line-number'><a name='L332' href='pngtrans.c.html#L332'><pre>332</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          * enabled by default.</pre></td></tr><tr><td class='line-number'><a name='L333' href='pngtrans.c.html#L333'><pre>333</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>          */</pre></td></tr><tr><td class='line-number'><a name='L334' href='pngtrans.c.html#L334'><pre>334</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         *(png_uint_16*)rp = __builtin_bswap16(*(png_uint_16*)rp);</pre></td></tr><tr><td class='line-number'><a name='L335' href='pngtrans.c.html#L335'><pre>335</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#else<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L336' href='pngtrans.c.html#L336'><pre>336</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         png_byte t = *rp;</span></pre></td></tr><tr><td class='line-number'><a name='L337' href='pngtrans.c.html#L337'><pre>337</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         *rp = *(rp + 1);</span></pre></td></tr><tr><td class='line-number'><a name='L338' href='pngtrans.c.html#L338'><pre>338</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         *(rp + 1) = t;</span></pre></td></tr><tr><td class='line-number'><a name='L339' href='pngtrans.c.html#L339'><pre>339</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>#endif</span></pre></td></tr><tr><td class='line-number'><a name='L340' href='pngtrans.c.html#L340'><pre>340</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L341' href='pngtrans.c.html#L341'><pre>341</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L342' href='pngtrans.c.html#L342'><pre>342</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L343' href='pngtrans.c.html#L343'><pre>343</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L344' href='pngtrans.c.html#L344'><pre>344</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L345' href='pngtrans.c.html#L345'><pre>345</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L346' href='pngtrans.c.html#L346'><pre>346</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_PACKSWAP_SUPPORTED)||defined(PNG_WRITE_PACKSWAP_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L347' href='pngtrans.c.html#L347'><pre>347</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>static const png_byte onebppswaptable[256] = {</pre></td></tr><tr><td class='line-number'><a name='L348' href='pngtrans.c.html#L348'><pre>348</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x00, 0x80, 0x40, 0xC0, 0x20, 0xA0, 0x60, 0xE0,</pre></td></tr><tr><td class='line-number'><a name='L349' href='pngtrans.c.html#L349'><pre>349</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x10, 0x90, 0x50, 0xD0, 0x30, 0xB0, 0x70, 0xF0,</pre></td></tr><tr><td class='line-number'><a name='L350' href='pngtrans.c.html#L350'><pre>350</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x08, 0x88, 0x48, 0xC8, 0x28, 0xA8, 0x68, 0xE8,</pre></td></tr><tr><td class='line-number'><a name='L351' href='pngtrans.c.html#L351'><pre>351</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x18, 0x98, 0x58, 0xD8, 0x38, 0xB8, 0x78, 0xF8,</pre></td></tr><tr><td class='line-number'><a name='L352' href='pngtrans.c.html#L352'><pre>352</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x04, 0x84, 0x44, 0xC4, 0x24, 0xA4, 0x64, 0xE4,</pre></td></tr><tr><td class='line-number'><a name='L353' href='pngtrans.c.html#L353'><pre>353</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x14, 0x94, 0x54, 0xD4, 0x34, 0xB4, 0x74, 0xF4,</pre></td></tr><tr><td class='line-number'><a name='L354' href='pngtrans.c.html#L354'><pre>354</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0C, 0x8C, 0x4C, 0xCC, 0x2C, 0xAC, 0x6C, 0xEC,</pre></td></tr><tr><td class='line-number'><a name='L355' href='pngtrans.c.html#L355'><pre>355</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x1C, 0x9C, 0x5C, 0xDC, 0x3C, 0xBC, 0x7C, 0xFC,</pre></td></tr><tr><td class='line-number'><a name='L356' href='pngtrans.c.html#L356'><pre>356</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x02, 0x82, 0x42, 0xC2, 0x22, 0xA2, 0x62, 0xE2,</pre></td></tr><tr><td class='line-number'><a name='L357' href='pngtrans.c.html#L357'><pre>357</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x12, 0x92, 0x52, 0xD2, 0x32, 0xB2, 0x72, 0xF2,</pre></td></tr><tr><td class='line-number'><a name='L358' href='pngtrans.c.html#L358'><pre>358</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0A, 0x8A, 0x4A, 0xCA, 0x2A, 0xAA, 0x6A, 0xEA,</pre></td></tr><tr><td class='line-number'><a name='L359' href='pngtrans.c.html#L359'><pre>359</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x1A, 0x9A, 0x5A, 0xDA, 0x3A, 0xBA, 0x7A, 0xFA,</pre></td></tr><tr><td class='line-number'><a name='L360' href='pngtrans.c.html#L360'><pre>360</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x06, 0x86, 0x46, 0xC6, 0x26, 0xA6, 0x66, 0xE6,</pre></td></tr><tr><td class='line-number'><a name='L361' href='pngtrans.c.html#L361'><pre>361</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x16, 0x96, 0x56, 0xD6, 0x36, 0xB6, 0x76, 0xF6,</pre></td></tr><tr><td class='line-number'><a name='L362' href='pngtrans.c.html#L362'><pre>362</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0E, 0x8E, 0x4E, 0xCE, 0x2E, 0xAE, 0x6E, 0xEE,</pre></td></tr><tr><td class='line-number'><a name='L363' href='pngtrans.c.html#L363'><pre>363</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x1E, 0x9E, 0x5E, 0xDE, 0x3E, 0xBE, 0x7E, 0xFE,</pre></td></tr><tr><td class='line-number'><a name='L364' href='pngtrans.c.html#L364'><pre>364</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x01, 0x81, 0x41, 0xC1, 0x21, 0xA1, 0x61, 0xE1,</pre></td></tr><tr><td class='line-number'><a name='L365' href='pngtrans.c.html#L365'><pre>365</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x11, 0x91, 0x51, 0xD1, 0x31, 0xB1, 0x71, 0xF1,</pre></td></tr><tr><td class='line-number'><a name='L366' href='pngtrans.c.html#L366'><pre>366</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x09, 0x89, 0x49, 0xC9, 0x29, 0xA9, 0x69, 0xE9,</pre></td></tr><tr><td class='line-number'><a name='L367' href='pngtrans.c.html#L367'><pre>367</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x19, 0x99, 0x59, 0xD9, 0x39, 0xB9, 0x79, 0xF9,</pre></td></tr><tr><td class='line-number'><a name='L368' href='pngtrans.c.html#L368'><pre>368</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x05, 0x85, 0x45, 0xC5, 0x25, 0xA5, 0x65, 0xE5,</pre></td></tr><tr><td class='line-number'><a name='L369' href='pngtrans.c.html#L369'><pre>369</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x15, 0x95, 0x55, 0xD5, 0x35, 0xB5, 0x75, 0xF5,</pre></td></tr><tr><td class='line-number'><a name='L370' href='pngtrans.c.html#L370'><pre>370</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0D, 0x8D, 0x4D, 0xCD, 0x2D, 0xAD, 0x6D, 0xED,</pre></td></tr><tr><td class='line-number'><a name='L371' href='pngtrans.c.html#L371'><pre>371</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x1D, 0x9D, 0x5D, 0xDD, 0x3D, 0xBD, 0x7D, 0xFD,</pre></td></tr><tr><td class='line-number'><a name='L372' href='pngtrans.c.html#L372'><pre>372</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x03, 0x83, 0x43, 0xC3, 0x23, 0xA3, 0x63, 0xE3,</pre></td></tr><tr><td class='line-number'><a name='L373' href='pngtrans.c.html#L373'><pre>373</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x13, 0x93, 0x53, 0xD3, 0x33, 0xB3, 0x73, 0xF3,</pre></td></tr><tr><td class='line-number'><a name='L374' href='pngtrans.c.html#L374'><pre>374</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0B, 0x8B, 0x4B, 0xCB, 0x2B, 0xAB, 0x6B, 0xEB,</pre></td></tr><tr><td class='line-number'><a name='L375' href='pngtrans.c.html#L375'><pre>375</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x1B, 0x9B, 0x5B, 0xDB, 0x3B, 0xBB, 0x7B, 0xFB,</pre></td></tr><tr><td class='line-number'><a name='L376' href='pngtrans.c.html#L376'><pre>376</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x07, 0x87, 0x47, 0xC7, 0x27, 0xA7, 0x67, 0xE7,</pre></td></tr><tr><td class='line-number'><a name='L377' href='pngtrans.c.html#L377'><pre>377</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x17, 0x97, 0x57, 0xD7, 0x37, 0xB7, 0x77, 0xF7,</pre></td></tr><tr><td class='line-number'><a name='L378' href='pngtrans.c.html#L378'><pre>378</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0F, 0x8F, 0x4F, 0xCF, 0x2F, 0xAF, 0x6F, 0xEF,</pre></td></tr><tr><td class='line-number'><a name='L379' href='pngtrans.c.html#L379'><pre>379</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x1F, 0x9F, 0x5F, 0xDF, 0x3F, 0xBF, 0x7F, 0xFF</pre></td></tr><tr><td class='line-number'><a name='L380' href='pngtrans.c.html#L380'><pre>380</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>};</pre></td></tr><tr><td class='line-number'><a name='L381' href='pngtrans.c.html#L381'><pre>381</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L382' href='pngtrans.c.html#L382'><pre>382</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>static const png_byte twobppswaptable[256] = {</pre></td></tr><tr><td class='line-number'><a name='L383' href='pngtrans.c.html#L383'><pre>383</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x00, 0x40, 0x80, 0xC0, 0x10, 0x50, 0x90, 0xD0,</pre></td></tr><tr><td class='line-number'><a name='L384' href='pngtrans.c.html#L384'><pre>384</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x20, 0x60, 0xA0, 0xE0, 0x30, 0x70, 0xB0, 0xF0,</pre></td></tr><tr><td class='line-number'><a name='L385' href='pngtrans.c.html#L385'><pre>385</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x04, 0x44, 0x84, 0xC4, 0x14, 0x54, 0x94, 0xD4,</pre></td></tr><tr><td class='line-number'><a name='L386' href='pngtrans.c.html#L386'><pre>386</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x24, 0x64, 0xA4, 0xE4, 0x34, 0x74, 0xB4, 0xF4,</pre></td></tr><tr><td class='line-number'><a name='L387' href='pngtrans.c.html#L387'><pre>387</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x08, 0x48, 0x88, 0xC8, 0x18, 0x58, 0x98, 0xD8,</pre></td></tr><tr><td class='line-number'><a name='L388' href='pngtrans.c.html#L388'><pre>388</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x28, 0x68, 0xA8, 0xE8, 0x38, 0x78, 0xB8, 0xF8,</pre></td></tr><tr><td class='line-number'><a name='L389' href='pngtrans.c.html#L389'><pre>389</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0C, 0x4C, 0x8C, 0xCC, 0x1C, 0x5C, 0x9C, 0xDC,</pre></td></tr><tr><td class='line-number'><a name='L390' href='pngtrans.c.html#L390'><pre>390</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x2C, 0x6C, 0xAC, 0xEC, 0x3C, 0x7C, 0xBC, 0xFC,</pre></td></tr><tr><td class='line-number'><a name='L391' href='pngtrans.c.html#L391'><pre>391</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x01, 0x41, 0x81, 0xC1, 0x11, 0x51, 0x91, 0xD1,</pre></td></tr><tr><td class='line-number'><a name='L392' href='pngtrans.c.html#L392'><pre>392</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x21, 0x61, 0xA1, 0xE1, 0x31, 0x71, 0xB1, 0xF1,</pre></td></tr><tr><td class='line-number'><a name='L393' href='pngtrans.c.html#L393'><pre>393</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x05, 0x45, 0x85, 0xC5, 0x15, 0x55, 0x95, 0xD5,</pre></td></tr><tr><td class='line-number'><a name='L394' href='pngtrans.c.html#L394'><pre>394</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x25, 0x65, 0xA5, 0xE5, 0x35, 0x75, 0xB5, 0xF5,</pre></td></tr><tr><td class='line-number'><a name='L395' href='pngtrans.c.html#L395'><pre>395</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x09, 0x49, 0x89, 0xC9, 0x19, 0x59, 0x99, 0xD9,</pre></td></tr><tr><td class='line-number'><a name='L396' href='pngtrans.c.html#L396'><pre>396</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x29, 0x69, 0xA9, 0xE9, 0x39, 0x79, 0xB9, 0xF9,</pre></td></tr><tr><td class='line-number'><a name='L397' href='pngtrans.c.html#L397'><pre>397</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0D, 0x4D, 0x8D, 0xCD, 0x1D, 0x5D, 0x9D, 0xDD,</pre></td></tr><tr><td class='line-number'><a name='L398' href='pngtrans.c.html#L398'><pre>398</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x2D, 0x6D, 0xAD, 0xED, 0x3D, 0x7D, 0xBD, 0xFD,</pre></td></tr><tr><td class='line-number'><a name='L399' href='pngtrans.c.html#L399'><pre>399</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x02, 0x42, 0x82, 0xC2, 0x12, 0x52, 0x92, 0xD2,</pre></td></tr><tr><td class='line-number'><a name='L400' href='pngtrans.c.html#L400'><pre>400</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x22, 0x62, 0xA2, 0xE2, 0x32, 0x72, 0xB2, 0xF2,</pre></td></tr><tr><td class='line-number'><a name='L401' href='pngtrans.c.html#L401'><pre>401</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x06, 0x46, 0x86, 0xC6, 0x16, 0x56, 0x96, 0xD6,</pre></td></tr><tr><td class='line-number'><a name='L402' href='pngtrans.c.html#L402'><pre>402</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x26, 0x66, 0xA6, 0xE6, 0x36, 0x76, 0xB6, 0xF6,</pre></td></tr><tr><td class='line-number'><a name='L403' href='pngtrans.c.html#L403'><pre>403</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0A, 0x4A, 0x8A, 0xCA, 0x1A, 0x5A, 0x9A, 0xDA,</pre></td></tr><tr><td class='line-number'><a name='L404' href='pngtrans.c.html#L404'><pre>404</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x2A, 0x6A, 0xAA, 0xEA, 0x3A, 0x7A, 0xBA, 0xFA,</pre></td></tr><tr><td class='line-number'><a name='L405' href='pngtrans.c.html#L405'><pre>405</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0E, 0x4E, 0x8E, 0xCE, 0x1E, 0x5E, 0x9E, 0xDE,</pre></td></tr><tr><td class='line-number'><a name='L406' href='pngtrans.c.html#L406'><pre>406</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x2E, 0x6E, 0xAE, 0xEE, 0x3E, 0x7E, 0xBE, 0xFE,</pre></td></tr><tr><td class='line-number'><a name='L407' href='pngtrans.c.html#L407'><pre>407</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x03, 0x43, 0x83, 0xC3, 0x13, 0x53, 0x93, 0xD3,</pre></td></tr><tr><td class='line-number'><a name='L408' href='pngtrans.c.html#L408'><pre>408</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x23, 0x63, 0xA3, 0xE3, 0x33, 0x73, 0xB3, 0xF3,</pre></td></tr><tr><td class='line-number'><a name='L409' href='pngtrans.c.html#L409'><pre>409</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x07, 0x47, 0x87, 0xC7, 0x17, 0x57, 0x97, 0xD7,</pre></td></tr><tr><td class='line-number'><a name='L410' href='pngtrans.c.html#L410'><pre>410</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x27, 0x67, 0xA7, 0xE7, 0x37, 0x77, 0xB7, 0xF7,</pre></td></tr><tr><td class='line-number'><a name='L411' href='pngtrans.c.html#L411'><pre>411</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0B, 0x4B, 0x8B, 0xCB, 0x1B, 0x5B, 0x9B, 0xDB,</pre></td></tr><tr><td class='line-number'><a name='L412' href='pngtrans.c.html#L412'><pre>412</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x2B, 0x6B, 0xAB, 0xEB, 0x3B, 0x7B, 0xBB, 0xFB,</pre></td></tr><tr><td class='line-number'><a name='L413' href='pngtrans.c.html#L413'><pre>413</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0F, 0x4F, 0x8F, 0xCF, 0x1F, 0x5F, 0x9F, 0xDF,</pre></td></tr><tr><td class='line-number'><a name='L414' href='pngtrans.c.html#L414'><pre>414</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x2F, 0x6F, 0xAF, 0xEF, 0x3F, 0x7F, 0xBF, 0xFF</pre></td></tr><tr><td class='line-number'><a name='L415' href='pngtrans.c.html#L415'><pre>415</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>};</pre></td></tr><tr><td class='line-number'><a name='L416' href='pngtrans.c.html#L416'><pre>416</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L417' href='pngtrans.c.html#L417'><pre>417</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>static const png_byte fourbppswaptable[256] = {</pre></td></tr><tr><td class='line-number'><a name='L418' href='pngtrans.c.html#L418'><pre>418</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x00, 0x10, 0x20, 0x30, 0x40, 0x50, 0x60, 0x70,</pre></td></tr><tr><td class='line-number'><a name='L419' href='pngtrans.c.html#L419'><pre>419</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x80, 0x90, 0xA0, 0xB0, 0xC0, 0xD0, 0xE0, 0xF0,</pre></td></tr><tr><td class='line-number'><a name='L420' href='pngtrans.c.html#L420'><pre>420</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x01, 0x11, 0x21, 0x31, 0x41, 0x51, 0x61, 0x71,</pre></td></tr><tr><td class='line-number'><a name='L421' href='pngtrans.c.html#L421'><pre>421</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x81, 0x91, 0xA1, 0xB1, 0xC1, 0xD1, 0xE1, 0xF1,</pre></td></tr><tr><td class='line-number'><a name='L422' href='pngtrans.c.html#L422'><pre>422</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x02, 0x12, 0x22, 0x32, 0x42, 0x52, 0x62, 0x72,</pre></td></tr><tr><td class='line-number'><a name='L423' href='pngtrans.c.html#L423'><pre>423</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x82, 0x92, 0xA2, 0xB2, 0xC2, 0xD2, 0xE2, 0xF2,</pre></td></tr><tr><td class='line-number'><a name='L424' href='pngtrans.c.html#L424'><pre>424</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x03, 0x13, 0x23, 0x33, 0x43, 0x53, 0x63, 0x73,</pre></td></tr><tr><td class='line-number'><a name='L425' href='pngtrans.c.html#L425'><pre>425</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x83, 0x93, 0xA3, 0xB3, 0xC3, 0xD3, 0xE3, 0xF3,</pre></td></tr><tr><td class='line-number'><a name='L426' href='pngtrans.c.html#L426'><pre>426</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x04, 0x14, 0x24, 0x34, 0x44, 0x54, 0x64, 0x74,</pre></td></tr><tr><td class='line-number'><a name='L427' href='pngtrans.c.html#L427'><pre>427</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x84, 0x94, 0xA4, 0xB4, 0xC4, 0xD4, 0xE4, 0xF4,</pre></td></tr><tr><td class='line-number'><a name='L428' href='pngtrans.c.html#L428'><pre>428</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x05, 0x15, 0x25, 0x35, 0x45, 0x55, 0x65, 0x75,</pre></td></tr><tr><td class='line-number'><a name='L429' href='pngtrans.c.html#L429'><pre>429</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x85, 0x95, 0xA5, 0xB5, 0xC5, 0xD5, 0xE5, 0xF5,</pre></td></tr><tr><td class='line-number'><a name='L430' href='pngtrans.c.html#L430'><pre>430</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x06, 0x16, 0x26, 0x36, 0x46, 0x56, 0x66, 0x76,</pre></td></tr><tr><td class='line-number'><a name='L431' href='pngtrans.c.html#L431'><pre>431</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x86, 0x96, 0xA6, 0xB6, 0xC6, 0xD6, 0xE6, 0xF6,</pre></td></tr><tr><td class='line-number'><a name='L432' href='pngtrans.c.html#L432'><pre>432</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x07, 0x17, 0x27, 0x37, 0x47, 0x57, 0x67, 0x77,</pre></td></tr><tr><td class='line-number'><a name='L433' href='pngtrans.c.html#L433'><pre>433</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x87, 0x97, 0xA7, 0xB7, 0xC7, 0xD7, 0xE7, 0xF7,</pre></td></tr><tr><td class='line-number'><a name='L434' href='pngtrans.c.html#L434'><pre>434</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x08, 0x18, 0x28, 0x38, 0x48, 0x58, 0x68, 0x78,</pre></td></tr><tr><td class='line-number'><a name='L435' href='pngtrans.c.html#L435'><pre>435</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x88, 0x98, 0xA8, 0xB8, 0xC8, 0xD8, 0xE8, 0xF8,</pre></td></tr><tr><td class='line-number'><a name='L436' href='pngtrans.c.html#L436'><pre>436</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x09, 0x19, 0x29, 0x39, 0x49, 0x59, 0x69, 0x79,</pre></td></tr><tr><td class='line-number'><a name='L437' href='pngtrans.c.html#L437'><pre>437</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x89, 0x99, 0xA9, 0xB9, 0xC9, 0xD9, 0xE9, 0xF9,</pre></td></tr><tr><td class='line-number'><a name='L438' href='pngtrans.c.html#L438'><pre>438</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0A, 0x1A, 0x2A, 0x3A, 0x4A, 0x5A, 0x6A, 0x7A,</pre></td></tr><tr><td class='line-number'><a name='L439' href='pngtrans.c.html#L439'><pre>439</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x8A, 0x9A, 0xAA, 0xBA, 0xCA, 0xDA, 0xEA, 0xFA,</pre></td></tr><tr><td class='line-number'><a name='L440' href='pngtrans.c.html#L440'><pre>440</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0B, 0x1B, 0x2B, 0x3B, 0x4B, 0x5B, 0x6B, 0x7B,</pre></td></tr><tr><td class='line-number'><a name='L441' href='pngtrans.c.html#L441'><pre>441</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x8B, 0x9B, 0xAB, 0xBB, 0xCB, 0xDB, 0xEB, 0xFB,</pre></td></tr><tr><td class='line-number'><a name='L442' href='pngtrans.c.html#L442'><pre>442</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0C, 0x1C, 0x2C, 0x3C, 0x4C, 0x5C, 0x6C, 0x7C,</pre></td></tr><tr><td class='line-number'><a name='L443' href='pngtrans.c.html#L443'><pre>443</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x8C, 0x9C, 0xAC, 0xBC, 0xCC, 0xDC, 0xEC, 0xFC,</pre></td></tr><tr><td class='line-number'><a name='L444' href='pngtrans.c.html#L444'><pre>444</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0D, 0x1D, 0x2D, 0x3D, 0x4D, 0x5D, 0x6D, 0x7D,</pre></td></tr><tr><td class='line-number'><a name='L445' href='pngtrans.c.html#L445'><pre>445</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x8D, 0x9D, 0xAD, 0xBD, 0xCD, 0xDD, 0xED, 0xFD,</pre></td></tr><tr><td class='line-number'><a name='L446' href='pngtrans.c.html#L446'><pre>446</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0E, 0x1E, 0x2E, 0x3E, 0x4E, 0x5E, 0x6E, 0x7E,</pre></td></tr><tr><td class='line-number'><a name='L447' href='pngtrans.c.html#L447'><pre>447</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x8E, 0x9E, 0xAE, 0xBE, 0xCE, 0xDE, 0xEE, 0xFE,</pre></td></tr><tr><td class='line-number'><a name='L448' href='pngtrans.c.html#L448'><pre>448</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x0F, 0x1F, 0x2F, 0x3F, 0x4F, 0x5F, 0x6F, 0x7F,</pre></td></tr><tr><td class='line-number'><a name='L449' href='pngtrans.c.html#L449'><pre>449</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   0x8F, 0x9F, 0xAF, 0xBF, 0xCF, 0xDF, 0xEF, 0xFF</pre></td></tr><tr><td class='line-number'><a name='L450' href='pngtrans.c.html#L450'><pre>450</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>};</pre></td></tr><tr><td class='line-number'><a name='L451' href='pngtrans.c.html#L451'><pre>451</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L452' href='pngtrans.c.html#L452'><pre>452</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Swaps pixel packing order within bytes */</pre></td></tr><tr><td class='line-number'><a name='L453' href='pngtrans.c.html#L453'><pre>453</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void /* PRIVATE */</pre></td></tr><tr><td class='line-number'><a name='L454' href='pngtrans.c.html#L454'><pre>454</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_do_packswap(png_row_infop row_info, png_bytep row)</pre></td></tr><tr><td class='line-number'><a name='L455' href='pngtrans.c.html#L455'><pre>455</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L456' href='pngtrans.c.html#L456'><pre>456</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_do_packswap&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L457' href='pngtrans.c.html#L457'><pre>457</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L458' href='pngtrans.c.html#L458'><pre>458</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>row_info-&gt;bit_depth &lt; 8</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L459' href='pngtrans.c.html#L459'><pre>459</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L460' href='pngtrans.c.html#L460'><pre>460</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_bytep rp;</span></pre></td></tr><tr><td class='line-number'><a name='L461' href='pngtrans.c.html#L461'><pre>461</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_const_bytep end, table;</span></pre></td></tr><tr><td class='line-number'><a name='L462' href='pngtrans.c.html#L462'><pre>462</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L463' href='pngtrans.c.html#L463'><pre>463</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      end = row + row_info-&gt;rowbytes;</span></pre></td></tr><tr><td class='line-number'><a name='L464' href='pngtrans.c.html#L464'><pre>464</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L465' href='pngtrans.c.html#L465'><pre>465</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      if (</span><span class='red'>row_info-&gt;bit_depth == 1</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L466' href='pngtrans.c.html#L466'><pre>466</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>table = onebppswaptable</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L467' href='pngtrans.c.html#L467'><pre>467</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L468' href='pngtrans.c.html#L468'><pre>468</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else <span class='red'>if (</span><span class='red'>row_info-&gt;bit_depth == 2</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L469' href='pngtrans.c.html#L469'><pre>469</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>table = twobppswaptable</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L470' href='pngtrans.c.html#L470'><pre>470</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L471' href='pngtrans.c.html#L471'><pre>471</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else <span class='red'>if (</span><span class='red'>row_info-&gt;bit_depth == 4</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L472' href='pngtrans.c.html#L472'><pre>472</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>table = fourbppswaptable</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L473' href='pngtrans.c.html#L473'><pre>473</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L474' href='pngtrans.c.html#L474'><pre>474</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else</pre></td></tr><tr><td class='line-number'><a name='L475' href='pngtrans.c.html#L475'><pre>475</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         <span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L476' href='pngtrans.c.html#L476'><pre>476</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L477' href='pngtrans.c.html#L477'><pre>477</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>for (rp = row; </span><span class='red'>rp &lt; end</span><span class='red'>; </span><span class='red'>rp++</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L478' href='pngtrans.c.html#L478'><pre>478</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>*rp = table[*rp]</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L479' href='pngtrans.c.html#L479'><pre>479</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L480' href='pngtrans.c.html#L480'><pre>480</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L481' href='pngtrans.c.html#L481'><pre>481</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif /* PACKSWAP || WRITE_PACKSWAP */</pre></td></tr><tr><td class='line-number'><a name='L482' href='pngtrans.c.html#L482'><pre>482</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L483' href='pngtrans.c.html#L483'><pre>483</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_WRITE_FILLER_SUPPORTED) || \</pre></td></tr><tr><td class='line-number'><a name='L484' href='pngtrans.c.html#L484'><pre>484</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    defined(PNG_READ_STRIP_ALPHA_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L485' href='pngtrans.c.html#L485'><pre>485</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Remove a channel - this used to be &apos;png_do_strip_filler&apos; but it used a</pre></td></tr><tr><td class='line-number'><a name='L486' href='pngtrans.c.html#L486'><pre>486</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * somewhat weird combination of flags to determine what to do.  All the calls</pre></td></tr><tr><td class='line-number'><a name='L487' href='pngtrans.c.html#L487'><pre>487</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * to png_do_strip_filler are changed in 1.5.2 to call this instead with the</pre></td></tr><tr><td class='line-number'><a name='L488' href='pngtrans.c.html#L488'><pre>488</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * correct arguments.</pre></td></tr><tr><td class='line-number'><a name='L489' href='pngtrans.c.html#L489'><pre>489</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> *</pre></td></tr><tr><td class='line-number'><a name='L490' href='pngtrans.c.html#L490'><pre>490</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * The routine isn&apos;t general - the channel must be the channel at the start or</pre></td></tr><tr><td class='line-number'><a name='L491' href='pngtrans.c.html#L491'><pre>491</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * end (not in the middle) of each pixel.</pre></td></tr><tr><td class='line-number'><a name='L492' href='pngtrans.c.html#L492'><pre>492</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> */</pre></td></tr><tr><td class='line-number'><a name='L493' href='pngtrans.c.html#L493'><pre>493</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void /* PRIVATE */</pre></td></tr><tr><td class='line-number'><a name='L494' href='pngtrans.c.html#L494'><pre>494</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_do_strip_channel(png_row_infop row_info, png_bytep row, int at_start)</pre></td></tr><tr><td class='line-number'><a name='L495' href='pngtrans.c.html#L495'><pre>495</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L496' href='pngtrans.c.html#L496'><pre>496</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   png_bytep sp = row; /* source pointer */</span></pre></td></tr><tr><td class='line-number'><a name='L497' href='pngtrans.c.html#L497'><pre>497</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   png_bytep dp = row; /* destination pointer */</span></pre></td></tr><tr><td class='line-number'><a name='L498' href='pngtrans.c.html#L498'><pre>498</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   png_bytep ep = row + row_info-&gt;rowbytes; /* One beyond end of row */</span></pre></td></tr><tr><td class='line-number'><a name='L499' href='pngtrans.c.html#L499'><pre>499</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L500' href='pngtrans.c.html#L500'><pre>500</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_do_strip_channel&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L501' href='pngtrans.c.html#L501'><pre>501</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L502' href='pngtrans.c.html#L502'><pre>502</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* At the start sp will point to the first byte to copy and dp to where</pre></td></tr><tr><td class='line-number'><a name='L503' href='pngtrans.c.html#L503'><pre>503</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    * it is copied to.  ep always points just beyond the end of the row, so</pre></td></tr><tr><td class='line-number'><a name='L504' href='pngtrans.c.html#L504'><pre>504</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    * the loop simply copies (channels-1) channels until sp reaches ep.</pre></td></tr><tr><td class='line-number'><a name='L505' href='pngtrans.c.html#L505'><pre>505</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    *</pre></td></tr><tr><td class='line-number'><a name='L506' href='pngtrans.c.html#L506'><pre>506</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    * at_start:        0 -- convert AG, XG, ARGB, XRGB, AAGG, XXGG, etc.</pre></td></tr><tr><td class='line-number'><a name='L507' href='pngtrans.c.html#L507'><pre>507</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    *            nonzero -- convert GA, GX, RGBA, RGBX, GGAA, RRGGBBXX, etc.</pre></td></tr><tr><td class='line-number'><a name='L508' href='pngtrans.c.html#L508'><pre>508</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    */</pre></td></tr><tr><td class='line-number'><a name='L509' href='pngtrans.c.html#L509'><pre>509</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L510' href='pngtrans.c.html#L510'><pre>510</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* GA, GX, XG cases */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L511' href='pngtrans.c.html#L511'><pre>511</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>row_info-&gt;channels == 2</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L512' href='pngtrans.c.html#L512'><pre>512</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L513' href='pngtrans.c.html#L513'><pre>513</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      if (</span><span class='red'>row_info-&gt;bit_depth == 8</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L514' href='pngtrans.c.html#L514'><pre>514</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L515' href='pngtrans.c.html#L515'><pre>515</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         if (</span><span class='red'>at_start != 0</span><span class='red'>) /* Skip initial filler */</span></pre></td></tr><tr><td class='line-number'><a name='L516' href='pngtrans.c.html#L516'><pre>516</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>++sp</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L517' href='pngtrans.c.html#L517'><pre>517</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         else          /* Skip initial channel and, for sp, the filler */</span></pre></td></tr><tr><td class='line-number'><a name='L518' href='pngtrans.c.html#L518'><pre>518</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L519' href='pngtrans.c.html#L519'><pre>519</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            sp += 2; ++dp;</span></pre></td></tr><tr><td class='line-number'><a name='L520' href='pngtrans.c.html#L520'><pre>520</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L521' href='pngtrans.c.html#L521'><pre>521</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L522' href='pngtrans.c.html#L522'><pre>522</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         /* For a 1 pixel wide image there is nothing to do */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L523' href='pngtrans.c.html#L523'><pre>523</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         while (</span><span class='red'>sp &lt; ep</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L524' href='pngtrans.c.html#L524'><pre>524</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L525' href='pngtrans.c.html#L525'><pre>525</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            *dp++ = *sp; sp += 2;</span></pre></td></tr><tr><td class='line-number'><a name='L526' href='pngtrans.c.html#L526'><pre>526</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L527' href='pngtrans.c.html#L527'><pre>527</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L528' href='pngtrans.c.html#L528'><pre>528</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         row_info-&gt;pixel_depth = 8;</span></pre></td></tr><tr><td class='line-number'><a name='L529' href='pngtrans.c.html#L529'><pre>529</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L530' href='pngtrans.c.html#L530'><pre>530</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L531' href='pngtrans.c.html#L531'><pre>531</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else <span class='red'>if (</span><span class='red'>row_info-&gt;bit_depth == 16</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L532' href='pngtrans.c.html#L532'><pre>532</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L533' href='pngtrans.c.html#L533'><pre>533</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         if (</span><span class='red'>at_start != 0</span><span class='red'>) /* Skip initial filler */</span></pre></td></tr><tr><td class='line-number'><a name='L534' href='pngtrans.c.html#L534'><pre>534</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>sp += 2</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L535' href='pngtrans.c.html#L535'><pre>535</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         else          /* Skip initial channel and, for sp, the filler */</span></pre></td></tr><tr><td class='line-number'><a name='L536' href='pngtrans.c.html#L536'><pre>536</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L537' href='pngtrans.c.html#L537'><pre>537</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            sp += 4; dp += 2;</span></pre></td></tr><tr><td class='line-number'><a name='L538' href='pngtrans.c.html#L538'><pre>538</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L539' href='pngtrans.c.html#L539'><pre>539</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L540' href='pngtrans.c.html#L540'><pre>540</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         while (</span><span class='red'>sp &lt; ep</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L541' href='pngtrans.c.html#L541'><pre>541</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L542' href='pngtrans.c.html#L542'><pre>542</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            *dp++ = *sp++; *dp++ = *sp; sp += 3;</span></pre></td></tr><tr><td class='line-number'><a name='L543' href='pngtrans.c.html#L543'><pre>543</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L544' href='pngtrans.c.html#L544'><pre>544</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L545' href='pngtrans.c.html#L545'><pre>545</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         row_info-&gt;pixel_depth = 16;</span></pre></td></tr><tr><td class='line-number'><a name='L546' href='pngtrans.c.html#L546'><pre>546</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L547' href='pngtrans.c.html#L547'><pre>547</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L548' href='pngtrans.c.html#L548'><pre>548</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else</pre></td></tr><tr><td class='line-number'><a name='L549' href='pngtrans.c.html#L549'><pre>549</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         <span class='red'>return</span><span class='red'>; /* bad bit depth */</span></pre></td></tr><tr><td class='line-number'><a name='L550' href='pngtrans.c.html#L550'><pre>550</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L551' href='pngtrans.c.html#L551'><pre>551</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>row_info-&gt;channels = 1;</span></pre></td></tr><tr><td class='line-number'><a name='L552' href='pngtrans.c.html#L552'><pre>552</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L553' href='pngtrans.c.html#L553'><pre>553</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>      /* Finally fix the color type if it records an alpha channel */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L554' href='pngtrans.c.html#L554'><pre>554</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_GRAY_ALPHA</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L555' href='pngtrans.c.html#L555'><pre>555</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>row_info-&gt;color_type = </span><span class='red'>PNG_COLOR_TYPE_GRAY</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L556' href='pngtrans.c.html#L556'><pre>556</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L557' href='pngtrans.c.html#L557'><pre>557</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L558' href='pngtrans.c.html#L558'><pre>558</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* RGBA, RGBX, XRGB cases */</pre></td></tr><tr><td class='line-number'><a name='L559' href='pngtrans.c.html#L559'><pre>559</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   else <span class='red'>if (</span><span class='red'>row_info-&gt;channels == 4</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L560' href='pngtrans.c.html#L560'><pre>560</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L561' href='pngtrans.c.html#L561'><pre>561</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      if (</span><span class='red'>row_info-&gt;bit_depth == 8</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L562' href='pngtrans.c.html#L562'><pre>562</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L563' href='pngtrans.c.html#L563'><pre>563</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         if (</span><span class='red'>at_start != 0</span><span class='red'>) /* Skip initial filler */</span></pre></td></tr><tr><td class='line-number'><a name='L564' href='pngtrans.c.html#L564'><pre>564</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>++sp</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L565' href='pngtrans.c.html#L565'><pre>565</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         else          /* Skip initial channels and, for sp, the filler */</span></pre></td></tr><tr><td class='line-number'><a name='L566' href='pngtrans.c.html#L566'><pre>566</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L567' href='pngtrans.c.html#L567'><pre>567</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            sp += 4; dp += 3;</span></pre></td></tr><tr><td class='line-number'><a name='L568' href='pngtrans.c.html#L568'><pre>568</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L569' href='pngtrans.c.html#L569'><pre>569</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L570' href='pngtrans.c.html#L570'><pre>570</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>         /* Note that the loop adds 3 to dp and 4 to sp each time. */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L571' href='pngtrans.c.html#L571'><pre>571</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         while (</span><span class='red'>sp &lt; ep</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L572' href='pngtrans.c.html#L572'><pre>572</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L573' href='pngtrans.c.html#L573'><pre>573</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            *dp++ = *sp++; *dp++ = *sp++; *dp++ = *sp; sp += 2;</span></pre></td></tr><tr><td class='line-number'><a name='L574' href='pngtrans.c.html#L574'><pre>574</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L575' href='pngtrans.c.html#L575'><pre>575</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L576' href='pngtrans.c.html#L576'><pre>576</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         row_info-&gt;pixel_depth = 24;</span></pre></td></tr><tr><td class='line-number'><a name='L577' href='pngtrans.c.html#L577'><pre>577</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L578' href='pngtrans.c.html#L578'><pre>578</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L579' href='pngtrans.c.html#L579'><pre>579</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else <span class='red'>if (</span><span class='red'>row_info-&gt;bit_depth == 16</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L580' href='pngtrans.c.html#L580'><pre>580</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L581' href='pngtrans.c.html#L581'><pre>581</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         if (</span><span class='red'>at_start != 0</span><span class='red'>) /* Skip initial filler */</span></pre></td></tr><tr><td class='line-number'><a name='L582' href='pngtrans.c.html#L582'><pre>582</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>sp += 2</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L583' href='pngtrans.c.html#L583'><pre>583</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         else          /* Skip initial channels and, for sp, the filler */</span></pre></td></tr><tr><td class='line-number'><a name='L584' href='pngtrans.c.html#L584'><pre>584</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L585' href='pngtrans.c.html#L585'><pre>585</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            sp += 8; dp += 6;</span></pre></td></tr><tr><td class='line-number'><a name='L586' href='pngtrans.c.html#L586'><pre>586</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L587' href='pngtrans.c.html#L587'><pre>587</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L588' href='pngtrans.c.html#L588'><pre>588</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         while (</span><span class='red'>sp &lt; ep</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L589' href='pngtrans.c.html#L589'><pre>589</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L590' href='pngtrans.c.html#L590'><pre>590</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>            /* Copy 6 bytes, skip 2 */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L591' href='pngtrans.c.html#L591'><pre>591</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            *dp++ = *sp++; *dp++ = *sp++;</span></pre></td></tr><tr><td class='line-number'><a name='L592' href='pngtrans.c.html#L592'><pre>592</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            *dp++ = *sp++; *dp++ = *sp++;</span></pre></td></tr><tr><td class='line-number'><a name='L593' href='pngtrans.c.html#L593'><pre>593</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            *dp++ = *sp++; *dp++ = *sp; sp += 3;</span></pre></td></tr><tr><td class='line-number'><a name='L594' href='pngtrans.c.html#L594'><pre>594</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L595' href='pngtrans.c.html#L595'><pre>595</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L596' href='pngtrans.c.html#L596'><pre>596</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         row_info-&gt;pixel_depth = 48;</span></pre></td></tr><tr><td class='line-number'><a name='L597' href='pngtrans.c.html#L597'><pre>597</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L598' href='pngtrans.c.html#L598'><pre>598</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L599' href='pngtrans.c.html#L599'><pre>599</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else</pre></td></tr><tr><td class='line-number'><a name='L600' href='pngtrans.c.html#L600'><pre>600</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         <span class='red'>return</span><span class='red'>; /* bad bit depth */</span></pre></td></tr><tr><td class='line-number'><a name='L601' href='pngtrans.c.html#L601'><pre>601</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L602' href='pngtrans.c.html#L602'><pre>602</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>row_info-&gt;channels = 3;</span></pre></td></tr><tr><td class='line-number'><a name='L603' href='pngtrans.c.html#L603'><pre>603</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L604' href='pngtrans.c.html#L604'><pre>604</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>      /* Finally fix the color type if it records an alpha channel */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L605' href='pngtrans.c.html#L605'><pre>605</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_RGB_ALPHA</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L606' href='pngtrans.c.html#L606'><pre>606</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>row_info-&gt;color_type = </span><span class='red'>PNG_COLOR_TYPE_RGB</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L607' href='pngtrans.c.html#L607'><pre>607</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L608' href='pngtrans.c.html#L608'><pre>608</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L609' href='pngtrans.c.html#L609'><pre>609</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   else</pre></td></tr><tr><td class='line-number'><a name='L610' href='pngtrans.c.html#L610'><pre>610</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      <span class='red'>return</span><span class='red'>; /* The filler channel has gone already */</span></pre></td></tr><tr><td class='line-number'><a name='L611' href='pngtrans.c.html#L611'><pre>611</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L612' href='pngtrans.c.html#L612'><pre>612</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* Fix the rowbytes value. */</pre></td></tr><tr><td class='line-number'><a name='L613' href='pngtrans.c.html#L613'><pre>613</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>row_info-&gt;rowbytes = (size_t)(dp-row);</span></pre></td></tr><tr><td class='line-number'><a name='L614' href='pngtrans.c.html#L614'><pre>614</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L615' href='pngtrans.c.html#L615'><pre>615</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L616' href='pngtrans.c.html#L616'><pre>616</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L617' href='pngtrans.c.html#L617'><pre>617</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_BGR_SUPPORTED) || defined(PNG_WRITE_BGR_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L618' href='pngtrans.c.html#L618'><pre>618</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Swaps red and blue bytes within a pixel */</pre></td></tr><tr><td class='line-number'><a name='L619' href='pngtrans.c.html#L619'><pre>619</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void /* PRIVATE */</pre></td></tr><tr><td class='line-number'><a name='L620' href='pngtrans.c.html#L620'><pre>620</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_do_bgr(png_row_infop row_info, png_bytep row)</pre></td></tr><tr><td class='line-number'><a name='L621' href='pngtrans.c.html#L621'><pre>621</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L622' href='pngtrans.c.html#L622'><pre>622</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_do_bgr&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L623' href='pngtrans.c.html#L623'><pre>623</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L624' href='pngtrans.c.html#L624'><pre>624</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>(row_info-&gt;color_type &amp; </span><span class='red'>PNG_COLOR_MASK_COLOR</span><span class='red'>) != 0)</span></pre></td></tr><tr><td class='line-number'><a name='L625' href='pngtrans.c.html#L625'><pre>625</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L626' href='pngtrans.c.html#L626'><pre>626</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_uint_32 row_width = row_info-&gt;width;</span></pre></td></tr><tr><td class='line-number'><a name='L627' href='pngtrans.c.html#L627'><pre>627</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      if (</span><span class='red'>row_info-&gt;bit_depth == 8</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L628' href='pngtrans.c.html#L628'><pre>628</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L629' href='pngtrans.c.html#L629'><pre>629</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_RGB</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L630' href='pngtrans.c.html#L630'><pre>630</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L631' href='pngtrans.c.html#L631'><pre>631</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_bytep rp;</span></pre></td></tr><tr><td class='line-number'><a name='L632' href='pngtrans.c.html#L632'><pre>632</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_uint_32 i;</span></pre></td></tr><tr><td class='line-number'><a name='L633' href='pngtrans.c.html#L633'><pre>633</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L634' href='pngtrans.c.html#L634'><pre>634</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (i = 0, rp = row; </span><span class='red'>i &lt; row_width</span><span class='red'>; </span><span class='red'>i++, rp += 3</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L635' href='pngtrans.c.html#L635'><pre>635</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L636' href='pngtrans.c.html#L636'><pre>636</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               png_byte save = *rp;</span></pre></td></tr><tr><td class='line-number'><a name='L637' href='pngtrans.c.html#L637'><pre>637</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *rp = *(rp + 2);</span></pre></td></tr><tr><td class='line-number'><a name='L638' href='pngtrans.c.html#L638'><pre>638</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 2) = save;</span></pre></td></tr><tr><td class='line-number'><a name='L639' href='pngtrans.c.html#L639'><pre>639</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L640' href='pngtrans.c.html#L640'><pre>640</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L641' href='pngtrans.c.html#L641'><pre>641</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L642' href='pngtrans.c.html#L642'><pre>642</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         else <span class='red'>if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_RGB_ALPHA</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L643' href='pngtrans.c.html#L643'><pre>643</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L644' href='pngtrans.c.html#L644'><pre>644</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_bytep rp;</span></pre></td></tr><tr><td class='line-number'><a name='L645' href='pngtrans.c.html#L645'><pre>645</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_uint_32 i;</span></pre></td></tr><tr><td class='line-number'><a name='L646' href='pngtrans.c.html#L646'><pre>646</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L647' href='pngtrans.c.html#L647'><pre>647</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (i = 0, rp = row; </span><span class='red'>i &lt; row_width</span><span class='red'>; </span><span class='red'>i++, rp += 4</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L648' href='pngtrans.c.html#L648'><pre>648</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L649' href='pngtrans.c.html#L649'><pre>649</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               png_byte save = *rp;</span></pre></td></tr><tr><td class='line-number'><a name='L650' href='pngtrans.c.html#L650'><pre>650</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *rp = *(rp + 2);</span></pre></td></tr><tr><td class='line-number'><a name='L651' href='pngtrans.c.html#L651'><pre>651</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 2) = save;</span></pre></td></tr><tr><td class='line-number'><a name='L652' href='pngtrans.c.html#L652'><pre>652</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L653' href='pngtrans.c.html#L653'><pre>653</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L654' href='pngtrans.c.html#L654'><pre>654</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L655' href='pngtrans.c.html#L655'><pre>655</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L656' href='pngtrans.c.html#L656'><pre>656</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>#ifdef PNG_16BIT_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L657' href='pngtrans.c.html#L657'><pre>657</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>      else <span class='red'>if (</span><span class='red'>row_info-&gt;bit_depth == 16</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L658' href='pngtrans.c.html#L658'><pre>658</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L659' href='pngtrans.c.html#L659'><pre>659</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_RGB</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L660' href='pngtrans.c.html#L660'><pre>660</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L661' href='pngtrans.c.html#L661'><pre>661</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_bytep rp;</span></pre></td></tr><tr><td class='line-number'><a name='L662' href='pngtrans.c.html#L662'><pre>662</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_uint_32 i;</span></pre></td></tr><tr><td class='line-number'><a name='L663' href='pngtrans.c.html#L663'><pre>663</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L664' href='pngtrans.c.html#L664'><pre>664</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (i = 0, rp = row; </span><span class='red'>i &lt; row_width</span><span class='red'>; </span><span class='red'>i++, rp += 6</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L665' href='pngtrans.c.html#L665'><pre>665</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L666' href='pngtrans.c.html#L666'><pre>666</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               png_byte save = *rp;</span></pre></td></tr><tr><td class='line-number'><a name='L667' href='pngtrans.c.html#L667'><pre>667</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *rp = *(rp + 4);</span></pre></td></tr><tr><td class='line-number'><a name='L668' href='pngtrans.c.html#L668'><pre>668</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 4) = save;</span></pre></td></tr><tr><td class='line-number'><a name='L669' href='pngtrans.c.html#L669'><pre>669</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               save = *(rp + 1);</span></pre></td></tr><tr><td class='line-number'><a name='L670' href='pngtrans.c.html#L670'><pre>670</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 1) = *(rp + 5);</span></pre></td></tr><tr><td class='line-number'><a name='L671' href='pngtrans.c.html#L671'><pre>671</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 5) = save;</span></pre></td></tr><tr><td class='line-number'><a name='L672' href='pngtrans.c.html#L672'><pre>672</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L673' href='pngtrans.c.html#L673'><pre>673</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L674' href='pngtrans.c.html#L674'><pre>674</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L675' href='pngtrans.c.html#L675'><pre>675</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         else <span class='red'>if (</span><span class='red'>row_info-&gt;color_type == </span><span class='red'>PNG_COLOR_TYPE_RGB_ALPHA</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L676' href='pngtrans.c.html#L676'><pre>676</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L677' href='pngtrans.c.html#L677'><pre>677</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_bytep rp;</span></pre></td></tr><tr><td class='line-number'><a name='L678' href='pngtrans.c.html#L678'><pre>678</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            png_uint_32 i;</span></pre></td></tr><tr><td class='line-number'><a name='L679' href='pngtrans.c.html#L679'><pre>679</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L680' href='pngtrans.c.html#L680'><pre>680</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (i = 0, rp = row; </span><span class='red'>i &lt; row_width</span><span class='red'>; </span><span class='red'>i++, rp += 8</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L681' href='pngtrans.c.html#L681'><pre>681</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L682' href='pngtrans.c.html#L682'><pre>682</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               png_byte save = *rp;</span></pre></td></tr><tr><td class='line-number'><a name='L683' href='pngtrans.c.html#L683'><pre>683</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *rp = *(rp + 4);</span></pre></td></tr><tr><td class='line-number'><a name='L684' href='pngtrans.c.html#L684'><pre>684</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 4) = save;</span></pre></td></tr><tr><td class='line-number'><a name='L685' href='pngtrans.c.html#L685'><pre>685</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               save = *(rp + 1);</span></pre></td></tr><tr><td class='line-number'><a name='L686' href='pngtrans.c.html#L686'><pre>686</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 1) = *(rp + 5);</span></pre></td></tr><tr><td class='line-number'><a name='L687' href='pngtrans.c.html#L687'><pre>687</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               *(rp + 5) = save;</span></pre></td></tr><tr><td class='line-number'><a name='L688' href='pngtrans.c.html#L688'><pre>688</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L689' href='pngtrans.c.html#L689'><pre>689</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L690' href='pngtrans.c.html#L690'><pre>690</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L691' href='pngtrans.c.html#L691'><pre>691</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>#endif</span></pre></td></tr><tr><td class='line-number'><a name='L692' href='pngtrans.c.html#L692'><pre>692</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L693' href='pngtrans.c.html#L693'><pre>693</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L694' href='pngtrans.c.html#L694'><pre>694</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif /* READ_BGR || WRITE_BGR */</pre></td></tr><tr><td class='line-number'><a name='L695' href='pngtrans.c.html#L695'><pre>695</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L696' href='pngtrans.c.html#L696'><pre>696</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_CHECK_FOR_INVALID_INDEX_SUPPORTED) || \</pre></td></tr><tr><td class='line-number'><a name='L697' href='pngtrans.c.html#L697'><pre>697</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    defined(PNG_WRITE_CHECK_FOR_INVALID_INDEX_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L698' href='pngtrans.c.html#L698'><pre>698</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* Added at libpng-1.5.10 */</pre></td></tr><tr><td class='line-number'><a name='L699' href='pngtrans.c.html#L699'><pre>699</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void /* PRIVATE */</pre></td></tr><tr><td class='line-number'><a name='L700' href='pngtrans.c.html#L700'><pre>700</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_do_check_palette_indexes(png_structrp png_ptr, png_row_infop row_info)</pre></td></tr><tr><td class='line-number'><a name='L701' href='pngtrans.c.html#L701'><pre>701</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L702' href='pngtrans.c.html#L702'><pre>702</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_do_check_palette_indexes&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L703' href='pngtrans.c.html#L703'><pre>703</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L704' href='pngtrans.c.html#L704'><pre>704</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr-&gt;num_palette &lt; (1 &lt;&lt; row_info-&gt;bit_depth)</span><span class='red'> &amp;&amp;</span></pre></td></tr><tr><td class='line-number'><a name='L705' href='pngtrans.c.html#L705'><pre>705</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>png_ptr-&gt;num_palette &gt; 0</span><span class='red'>) /* num_palette can be 0 in MNG files */</span></pre></td></tr><tr><td class='line-number'><a name='L706' href='pngtrans.c.html#L706'><pre>706</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L707' href='pngtrans.c.html#L707'><pre>707</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>      /* Calculations moved outside switch in an attempt to stop different</pre></td></tr><tr><td class='line-number'><a name='L708' href='pngtrans.c.html#L708'><pre>708</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>       * compiler warnings.  &apos;padding&apos; is in *bits* within the last byte, it is</pre></td></tr><tr><td class='line-number'><a name='L709' href='pngtrans.c.html#L709'><pre>709</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>       * an &apos;int&apos; because pixel_depth becomes an &apos;int&apos; in the expression below,</pre></td></tr><tr><td class='line-number'><a name='L710' href='pngtrans.c.html#L710'><pre>710</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>       * and this calculation is used because it avoids warnings that other</pre></td></tr><tr><td class='line-number'><a name='L711' href='pngtrans.c.html#L711'><pre>711</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>       * forms produced on either GCC or MSVC.</pre></td></tr><tr><td class='line-number'><a name='L712' href='pngtrans.c.html#L712'><pre>712</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>       */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L713' href='pngtrans.c.html#L713'><pre>713</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      int padding = </span><span class='red'>PNG_PADBITS</span><span class='red'>(row_info-&gt;pixel_depth, row_info-&gt;width);</span></pre></td></tr><tr><td class='line-number'><a name='L714' href='pngtrans.c.html#L714'><pre>714</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      png_bytep rp = png_ptr-&gt;row_buf + row_info-&gt;rowbytes;</span></pre></td></tr><tr><td class='line-number'><a name='L715' href='pngtrans.c.html#L715'><pre>715</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L716' href='pngtrans.c.html#L716'><pre>716</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      switch (row_info-&gt;bit_depth)</span></pre></td></tr><tr><td class='line-number'><a name='L717' href='pngtrans.c.html#L717'><pre>717</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      {</span></pre></td></tr><tr><td class='line-number'><a name='L718' href='pngtrans.c.html#L718'><pre>718</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         </span><span class='red'>case 1:</span></pre></td></tr><tr><td class='line-number'><a name='L719' href='pngtrans.c.html#L719'><pre>719</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         {</span></pre></td></tr><tr><td class='line-number'><a name='L720' href='pngtrans.c.html#L720'><pre>720</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>            /* in this case, all bytes must be 0 so we don&apos;t need</pre></td></tr><tr><td class='line-number'><a name='L721' href='pngtrans.c.html#L721'><pre>721</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>             * to unpack the pixels except for the rightmost one.</pre></td></tr><tr><td class='line-number'><a name='L722' href='pngtrans.c.html#L722'><pre>722</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>             */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L723' href='pngtrans.c.html#L723'><pre>723</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (; </span><span class='red'>rp &gt; png_ptr-&gt;row_buf</span><span class='red'>; </span><span class='red'>rp--</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L724' href='pngtrans.c.html#L724'><pre>724</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L725' href='pngtrans.c.html#L725'><pre>725</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              if (</span><span class='red'>(*rp &gt;&gt; padding) != 0</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L726' href='pngtrans.c.html#L726'><pre>726</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                 </span><span class='red'>png_ptr-&gt;num_palette_max = 1</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L727' href='pngtrans.c.html#L727'><pre>727</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              padding = 0;</span></pre></td></tr><tr><td class='line-number'><a name='L728' href='pngtrans.c.html#L728'><pre>728</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span></pre></td></tr><tr><td class='line-number'><a name='L729' href='pngtrans.c.html#L729'><pre>729</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L730' href='pngtrans.c.html#L730'><pre>730</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            break;</span></pre></td></tr><tr><td class='line-number'><a name='L731' href='pngtrans.c.html#L731'><pre>731</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L732' href='pngtrans.c.html#L732'><pre>732</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L733' href='pngtrans.c.html#L733'><pre>733</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         <span class='red'>case 2:</span></pre></td></tr><tr><td class='line-number'><a name='L734' href='pngtrans.c.html#L734'><pre>734</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         {</span></pre></td></tr><tr><td class='line-number'><a name='L735' href='pngtrans.c.html#L735'><pre>735</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (; </span><span class='red'>rp &gt; png_ptr-&gt;row_buf</span><span class='red'>; </span><span class='red'>rp--</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L736' href='pngtrans.c.html#L736'><pre>736</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L737' href='pngtrans.c.html#L737'><pre>737</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              int i = ((*rp &gt;&gt; padding) &amp; 0x03);</span></pre></td></tr><tr><td class='line-number'><a name='L738' href='pngtrans.c.html#L738'><pre>738</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L739' href='pngtrans.c.html#L739'><pre>739</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              if (</span><span class='red'>i &gt; png_ptr-&gt;num_palette_max</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L740' href='pngtrans.c.html#L740'><pre>740</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                 </span><span class='red'>png_ptr-&gt;num_palette_max = i</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L741' href='pngtrans.c.html#L741'><pre>741</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L742' href='pngtrans.c.html#L742'><pre>742</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              i = (((*rp &gt;&gt; padding) &gt;&gt; 2) &amp; 0x03);</span></pre></td></tr><tr><td class='line-number'><a name='L743' href='pngtrans.c.html#L743'><pre>743</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L744' href='pngtrans.c.html#L744'><pre>744</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              if (</span><span class='red'>i &gt; png_ptr-&gt;num_palette_max</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L745' href='pngtrans.c.html#L745'><pre>745</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                 </span><span class='red'>png_ptr-&gt;num_palette_max = i</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L746' href='pngtrans.c.html#L746'><pre>746</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L747' href='pngtrans.c.html#L747'><pre>747</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              i = (((*rp &gt;&gt; padding) &gt;&gt; 4) &amp; 0x03);</span></pre></td></tr><tr><td class='line-number'><a name='L748' href='pngtrans.c.html#L748'><pre>748</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L749' href='pngtrans.c.html#L749'><pre>749</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              if (</span><span class='red'>i &gt; png_ptr-&gt;num_palette_max</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L750' href='pngtrans.c.html#L750'><pre>750</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                 </span><span class='red'>png_ptr-&gt;num_palette_max = i</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L751' href='pngtrans.c.html#L751'><pre>751</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L752' href='pngtrans.c.html#L752'><pre>752</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              i = (((*rp &gt;&gt; padding) &gt;&gt; 6) &amp; 0x03);</span></pre></td></tr><tr><td class='line-number'><a name='L753' href='pngtrans.c.html#L753'><pre>753</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L754' href='pngtrans.c.html#L754'><pre>754</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              if (</span><span class='red'>i &gt; png_ptr-&gt;num_palette_max</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L755' href='pngtrans.c.html#L755'><pre>755</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                 </span><span class='red'>png_ptr-&gt;num_palette_max = i</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L756' href='pngtrans.c.html#L756'><pre>756</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L757' href='pngtrans.c.html#L757'><pre>757</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              padding = 0;</span></pre></td></tr><tr><td class='line-number'><a name='L758' href='pngtrans.c.html#L758'><pre>758</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span></pre></td></tr><tr><td class='line-number'><a name='L759' href='pngtrans.c.html#L759'><pre>759</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L760' href='pngtrans.c.html#L760'><pre>760</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            break;</span></pre></td></tr><tr><td class='line-number'><a name='L761' href='pngtrans.c.html#L761'><pre>761</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L762' href='pngtrans.c.html#L762'><pre>762</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L763' href='pngtrans.c.html#L763'><pre>763</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         <span class='red'>case 4:</span></pre></td></tr><tr><td class='line-number'><a name='L764' href='pngtrans.c.html#L764'><pre>764</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         {</span></pre></td></tr><tr><td class='line-number'><a name='L765' href='pngtrans.c.html#L765'><pre>765</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (; </span><span class='red'>rp &gt; png_ptr-&gt;row_buf</span><span class='red'>; </span><span class='red'>rp--</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L766' href='pngtrans.c.html#L766'><pre>766</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L767' href='pngtrans.c.html#L767'><pre>767</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              int i = ((*rp &gt;&gt; padding) &amp; 0x0f);</span></pre></td></tr><tr><td class='line-number'><a name='L768' href='pngtrans.c.html#L768'><pre>768</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L769' href='pngtrans.c.html#L769'><pre>769</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              if (</span><span class='red'>i &gt; png_ptr-&gt;num_palette_max</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L770' href='pngtrans.c.html#L770'><pre>770</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                 </span><span class='red'>png_ptr-&gt;num_palette_max = i</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L771' href='pngtrans.c.html#L771'><pre>771</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L772' href='pngtrans.c.html#L772'><pre>772</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              i = (((*rp &gt;&gt; padding) &gt;&gt; 4) &amp; 0x0f);</span></pre></td></tr><tr><td class='line-number'><a name='L773' href='pngtrans.c.html#L773'><pre>773</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L774' href='pngtrans.c.html#L774'><pre>774</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              if (</span><span class='red'>i &gt; png_ptr-&gt;num_palette_max</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L775' href='pngtrans.c.html#L775'><pre>775</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                 </span><span class='red'>png_ptr-&gt;num_palette_max = i</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L776' href='pngtrans.c.html#L776'><pre>776</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L777' href='pngtrans.c.html#L777'><pre>777</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>              padding = 0;</span></pre></td></tr><tr><td class='line-number'><a name='L778' href='pngtrans.c.html#L778'><pre>778</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span></pre></td></tr><tr><td class='line-number'><a name='L779' href='pngtrans.c.html#L779'><pre>779</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L780' href='pngtrans.c.html#L780'><pre>780</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            break;</span></pre></td></tr><tr><td class='line-number'><a name='L781' href='pngtrans.c.html#L781'><pre>781</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L782' href='pngtrans.c.html#L782'><pre>782</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L783' href='pngtrans.c.html#L783'><pre>783</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         <span class='red'>case 8:</span></pre></td></tr><tr><td class='line-number'><a name='L784' href='pngtrans.c.html#L784'><pre>784</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         {</span></pre></td></tr><tr><td class='line-number'><a name='L785' href='pngtrans.c.html#L785'><pre>785</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            for (; </span><span class='red'>rp &gt; png_ptr-&gt;row_buf</span><span class='red'>; </span><span class='red'>rp--</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L786' href='pngtrans.c.html#L786'><pre>786</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L787' href='pngtrans.c.html#L787'><pre>787</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>               if (</span><span class='red'>*rp &gt; png_ptr-&gt;num_palette_max</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L788' href='pngtrans.c.html#L788'><pre>788</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>                  </span><span class='red'>png_ptr-&gt;num_palette_max = (int) *rp</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L789' href='pngtrans.c.html#L789'><pre>789</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            }</span></pre></td></tr><tr><td class='line-number'><a name='L790' href='pngtrans.c.html#L790'><pre>790</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L791' href='pngtrans.c.html#L791'><pre>791</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            break;</span></pre></td></tr><tr><td class='line-number'><a name='L792' href='pngtrans.c.html#L792'><pre>792</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>         }</span></pre></td></tr><tr><td class='line-number'><a name='L793' href='pngtrans.c.html#L793'><pre>793</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L794' href='pngtrans.c.html#L794'><pre>794</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>         <span class='red'>default:</span></pre></td></tr><tr><td class='line-number'><a name='L795' href='pngtrans.c.html#L795'><pre>795</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>            break</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L796' href='pngtrans.c.html#L796'><pre>796</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      }</span></pre></td></tr><tr><td class='line-number'><a name='L797' href='pngtrans.c.html#L797'><pre>797</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L798' href='pngtrans.c.html#L798'><pre>798</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L799' href='pngtrans.c.html#L799'><pre>799</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif /* CHECK_FOR_INVALID_INDEX */</pre></td></tr><tr><td class='line-number'><a name='L800' href='pngtrans.c.html#L800'><pre>800</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L801' href='pngtrans.c.html#L801'><pre>801</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#if defined(PNG_READ_USER_TRANSFORM_SUPPORTED) || \</pre></td></tr><tr><td class='line-number'><a name='L802' href='pngtrans.c.html#L802'><pre>802</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    defined(PNG_WRITE_USER_TRANSFORM_SUPPORTED)</pre></td></tr><tr><td class='line-number'><a name='L803' href='pngtrans.c.html#L803'><pre>803</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#ifdef PNG_USER_TRANSFORM_PTR_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L804' href='pngtrans.c.html#L804'><pre>804</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>void PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L805' href='pngtrans.c.html#L805'><pre>805</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_set_user_transform_info(png_structrp png_ptr, png_voidp</pre></td></tr><tr><td class='line-number'><a name='L806' href='pngtrans.c.html#L806'><pre>806</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   user_transform_ptr, int user_transform_depth, int user_transform_channels)</pre></td></tr><tr><td class='line-number'><a name='L807' href='pngtrans.c.html#L807'><pre>807</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L808' href='pngtrans.c.html#L808'><pre>808</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>png_debug</span><span class='red'>(1, &quot;in png_set_user_transform_info&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L809' href='pngtrans.c.html#L809'><pre>809</pre></a></td><td class='uncovered-line'></td><td class='code'><pre><span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L810' href='pngtrans.c.html#L810'><pre>810</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L811' href='pngtrans.c.html#L811'><pre>811</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L812' href='pngtrans.c.html#L812'><pre>812</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L813' href='pngtrans.c.html#L813'><pre>813</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>#ifdef PNG_READ_USER_TRANSFORM_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L814' href='pngtrans.c.html#L814'><pre>814</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>if (</span><span class='red'>(png_ptr-&gt;mode &amp; </span><span class='red'>PNG_IS_READ_STRUCT</span><span class='red'>) != 0 &amp;&amp;</span></pre></td></tr><tr><td class='line-number'><a name='L815' href='pngtrans.c.html#L815'><pre>815</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>(png_ptr-&gt;flags &amp; </span><span class='red'>PNG_FLAG_ROW_INIT</span><span class='red'>) != 0)</span></pre></td></tr><tr><td class='line-number'><a name='L816' href='pngtrans.c.html#L816'><pre>816</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L817' href='pngtrans.c.html#L817'><pre>817</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>png_app_error</span><span class='red'>(png_ptr,</span></pre></td></tr><tr><td class='line-number'><a name='L818' href='pngtrans.c.html#L818'><pre>818</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>          &quot;info change after png_start_read_image or png_read_update_info&quot;);</span></pre></td></tr><tr><td class='line-number'><a name='L819' href='pngtrans.c.html#L819'><pre>819</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      return;</span></pre></td></tr><tr><td class='line-number'><a name='L820' href='pngtrans.c.html#L820'><pre>820</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   }</span></pre></td></tr><tr><td class='line-number'><a name='L821' href='pngtrans.c.html#L821'><pre>821</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>#endif</span></pre></td></tr><tr><td class='line-number'><a name='L822' href='pngtrans.c.html#L822'><pre>822</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L823' href='pngtrans.c.html#L823'><pre>823</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>png_ptr-&gt;user_transform_ptr = user_transform_ptr;</span></pre></td></tr><tr><td class='line-number'><a name='L824' href='pngtrans.c.html#L824'><pre>824</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   png_ptr-&gt;user_transform_depth = (png_byte)user_transform_depth;</span></pre></td></tr><tr><td class='line-number'><a name='L825' href='pngtrans.c.html#L825'><pre>825</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   png_ptr-&gt;user_transform_channels = (png_byte)user_transform_channels;</span></pre></td></tr><tr><td class='line-number'><a name='L826' href='pngtrans.c.html#L826'><pre>826</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L827' href='pngtrans.c.html#L827'><pre>827</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L828' href='pngtrans.c.html#L828'><pre>828</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L829' href='pngtrans.c.html#L829'><pre>829</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>/* This function returns a pointer to the user_transform_ptr associated with</pre></td></tr><tr><td class='line-number'><a name='L830' href='pngtrans.c.html#L830'><pre>830</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * the user transform functions.  The application should free any memory</pre></td></tr><tr><td class='line-number'><a name='L831' href='pngtrans.c.html#L831'><pre>831</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * associated with this pointer before png_write_destroy and png_read_destroy</pre></td></tr><tr><td class='line-number'><a name='L832' href='pngtrans.c.html#L832'><pre>832</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> * are called.</pre></td></tr><tr><td class='line-number'><a name='L833' href='pngtrans.c.html#L833'><pre>833</pre></a></td><td class='uncovered-line'></td><td class='code'><pre> */</pre></td></tr><tr><td class='line-number'><a name='L834' href='pngtrans.c.html#L834'><pre>834</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#ifdef PNG_USER_TRANSFORM_PTR_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L835' href='pngtrans.c.html#L835'><pre>835</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_voidp PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L836' href='pngtrans.c.html#L836'><pre>836</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_get_user_transform_ptr(png_const_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L837' href='pngtrans.c.html#L837'><pre>837</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L838' href='pngtrans.c.html#L838'><pre>838</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr == NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L839' href='pngtrans.c.html#L839'><pre>839</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return NULL</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L840' href='pngtrans.c.html#L840'><pre>840</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L841' href='pngtrans.c.html#L841'><pre>841</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>return png_ptr-&gt;user_transform_ptr</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L842' href='pngtrans.c.html#L842'><pre>842</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L843' href='pngtrans.c.html#L843'><pre>843</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif</pre></td></tr><tr><td class='line-number'><a name='L844' href='pngtrans.c.html#L844'><pre>844</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L845' href='pngtrans.c.html#L845'><pre>845</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#ifdef PNG_USER_TRANSFORM_INFO_SUPPORTED</pre></td></tr><tr><td class='line-number'><a name='L846' href='pngtrans.c.html#L846'><pre>846</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_uint_32 PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L847' href='pngtrans.c.html#L847'><pre>847</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_get_current_row_number(png_const_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L848' href='pngtrans.c.html#L848'><pre>848</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L849' href='pngtrans.c.html#L849'><pre>849</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>   /* See the comments in png.h - this is the sub-image row when reading an</pre></td></tr><tr><td class='line-number'><a name='L850' href='pngtrans.c.html#L850'><pre>850</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    * interlaced image.</pre></td></tr><tr><td class='line-number'><a name='L851' href='pngtrans.c.html#L851'><pre>851</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>    */<span class='red'></span></pre></td></tr><tr><td class='line-number'><a name='L852' href='pngtrans.c.html#L852'><pre>852</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr != NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L853' href='pngtrans.c.html#L853'><pre>853</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return png_ptr-&gt;row_number</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L854' href='pngtrans.c.html#L854'><pre>854</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L855' href='pngtrans.c.html#L855'><pre>855</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre>   <span class='red'>return </span><span class='red'>PNG_UINT_32_MAX</span><span class='red'>; /* help the app not to fail silently */</span></pre></td></tr><tr><td class='line-number'><a name='L856' href='pngtrans.c.html#L856'><pre>856</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L857' href='pngtrans.c.html#L857'><pre>857</pre></a></td><td class='uncovered-line'></td><td class='code'><pre></pre></td></tr><tr><td class='line-number'><a name='L858' href='pngtrans.c.html#L858'><pre>858</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_byte PNGAPI</pre></td></tr><tr><td class='line-number'><a name='L859' href='pngtrans.c.html#L859'><pre>859</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>png_get_current_pass_number(png_const_structrp png_ptr)</pre></td></tr><tr><td class='line-number'><a name='L860' href='pngtrans.c.html#L860'><pre>860</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>{</span></pre></td></tr><tr><td class='line-number'><a name='L861' href='pngtrans.c.html#L861'><pre>861</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   if (</span><span class='red'>png_ptr != NULL</span><span class='red'>)</span></pre></td></tr><tr><td class='line-number'><a name='L862' href='pngtrans.c.html#L862'><pre>862</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>      </span><span class='red'>return png_ptr-&gt;pass</span><span class='red'>;</span></pre></td></tr><tr><td class='line-number'><a name='L863' href='pngtrans.c.html#L863'><pre>863</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>   </span><span class='red'>return 8</span><span class='red'>; /* invalid */</span></pre></td></tr><tr><td class='line-number'><a name='L864' href='pngtrans.c.html#L864'><pre>864</pre></a></td><td class='uncovered-line'><pre>0</pre></td><td class='code'><pre><span class='red'>}</span></pre></td></tr><tr><td class='line-number'><a name='L865' href='pngtrans.c.html#L865'><pre>865</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif /* USER_TRANSFORM_INFO */</pre></td></tr><tr><td class='line-number'><a name='L866' href='pngtrans.c.html#L866'><pre>866</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif /* READ_USER_TRANSFORM || WRITE_USER_TRANSFORM */</pre></td></tr><tr><td class='line-number'><a name='L867' href='pngtrans.c.html#L867'><pre>867</pre></a></td><td class='uncovered-line'></td><td class='code'><pre>#endif /* READ || WRITE */</pre></td></tr></table></div></body></html>